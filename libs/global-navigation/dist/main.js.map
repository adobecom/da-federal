{
  "version": 3,
  "sources": ["../src/Error/Error.ts", "../src/Utils/Utils.ts", "../src/Components/Brand/Parse.ts", "../src/Components/Brand/brand.css", "../src/Components/Brand/Render.ts", "../src/Components/Link/Parse.ts", "../src/Components/CTA/Parse.ts", "../src/Components/CTA/Render.ts", "../src/Components/Link/Render.ts", "../src/Components/LinkGroup/Parse.ts", "../src/Components/Tab/Parse.ts", "../src/Components/MegaMenu/Parse.ts", "../src/Components/MegaMenu/megaMenu.css", "../src/Components/MegaMenu/Render.ts", "../src/Components/SmallMenu/Parse.ts", "../src/Components/LinkGroup/linkGroup.css", "../src/Components/LinkGroup/Render.ts", "../src/Components/Tab/Render.ts", "../src/Components/SmallMenu/Render.ts", "../src/Components/Text/Parse.ts", "../src/Components/Text/Render.ts", "../src/Components/Component.ts", "../src/Parse/Parse.ts", "../src/PostRendering/ClickListeners.ts", "../src/PostRendering/Keyboard.ts", "../src/PostRendering/Unav/Unav.utils.ts", "../src/PostRendering/Unav/Unav.config.ts", "../src/PostRendering/Unav/Unav.loader.ts", "../src/PreRendering/FetchAssets.ts", "../src/styles/styles.css", "../src/Main.ts"],
  "sourcesContent": ["export class IrrecoverableError extends Error {\n  constructor(message: string) {\n    super(message);\n    // This is important for proper instanceof checks\n    Object.setPrototypeOf(this, IrrecoverableError.prototype);\n    // TODO: Lana logging logic can go here\n  }\n}\n\ntype Severity\n  = \"Minor\"\n  | \"Major\"\n  | \"Critical\"\n\nexport class RecoverableError extends Error {\n  constructor(message: string, severity: Severity = \"Minor\") {\n    super(message);\n    // This is important for proper instanceof checks\n    Object.setPrototypeOf(this, RecoverableError.prototype);\n    if (severity !== \"Minor\") {\n      // TODO: Lana logging logic can go here\n    }\n  }\n}\n", "import { IrrecoverableError } from \"../Error/Error\";\n\nexport const isDesktop = window.matchMedia('(min-width: 900px)');\n\nexport const icons = {\n  brand: '<svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" id=\"Layer_1\" viewBox=\"0 0 64.57 35\"><defs><style>.cls-1{fill: #eb1000;}</style></defs><path class=\"cls-1\" d=\"M6.27,10.22h4.39l6.2,14.94h-4.64l-3.92-9.92-2.59,6.51h3.08l1.23,3.41H0l6.27-14.94ZM22.03,13.32c.45,0,.94.04,1.43.16v-3.7h3.88v14.72c-.89.4-2.81.89-4.73.89-3.48,0-6.47-1.98-6.47-5.93s2.88-6.13,5.89-6.13ZM22.52,22.19c.36,0,.65-.07.94-.16v-5.42c-.29-.11-.58-.16-.96-.16-1.27,0-2.45.94-2.45,2.92s1.2,2.81,2.47,2.81ZM34.25,13.32c3.23,0,5.98,2.18,5.98,6.02s-2.74,6.02-5.98,6.02-6-2.18-6-6.02,2.72-6.02,6-6.02ZM34.25,22.13c1.11,0,2.14-.89,2.14-2.79s-1.03-2.79-2.14-2.79-2.12.89-2.12,2.79.96,2.79,2.12,2.79ZM41.16,9.78h3.9v3.7c.47-.09.96-.16,1.45-.16,3.03,0,5.84,1.98,5.84,5.86,0,4.1-2.99,6.18-6.53,6.18-1.52,0-3.46-.31-4.66-.87v-14.72ZM45.91,22.17c1.34,0,2.56-.96,2.56-2.94,0-1.85-1.2-2.72-2.5-2.72-.36,0-.65.04-.91.16v5.35c.22.09.51.16.85.16ZM58.97,13.32c2.92,0,5.6,1.87,5.6,5.64,0,.51-.02,1-.09,1.49h-7.27c.4,1.32,1.56,1.94,3.01,1.94,1.18,0,2.27-.29,3.5-.82v2.97c-1.14.58-2.5.82-3.9.82-3.7,0-6.58-2.23-6.58-6.02s2.61-6.02,5.73-6.02ZM60.93,18.02c-.2-1.27-1.05-1.78-1.92-1.78s-1.58.54-1.87,1.78h3.79Z\"/></svg>',\n  company: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"22\" viewBox=\"0 0 24 22\" fill=\"none\"><path d=\"M14.2353 21.6209L12.4925 16.7699H8.11657L11.7945 7.51237L17.3741 21.6209H24L15.1548 0.379395H8.90929L0 21.6209H14.2353Z\" fill=\"#EB1000\"/></svg>',\n  search: '<svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" focusable=\"false\"><path d=\"M14 2A8 8 0 0 0 7.4 14.5L2.4 19.4a1.5 1.5 0 0 0 2.1 2.1L9.5 16.6A8 8 0 1 0 14 2Zm0 14.1A6.1 6.1 0 1 1 20.1 10 6.1 6.1 0 0 1 14 16.1Z\"></path></svg>',\n  home: '<svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" height=\"25\" viewBox=\"0 0 18 18\" width=\"25\"><path fill=\"#6E6E6E\" d=\"M17.666,10.125,9.375,1.834a.53151.53151,0,0,0-.75,0L.334,10.125a.53051.53051,0,0,0,0,.75l.979.9785A.5.5,0,0,0,1.6665,12H2v4.5a.5.5,0,0,0,.5.5h4a.5.5,0,0,0,.5-.5v-5a.5.5,0,0,1,.5-.5h3a.5.5,0,0,1,.5.5v5a.5.5,0,0,0,.5.5h4a.5.5,0,0,0,.5-.5V12h.3335a.5.5,0,0,0,.3535-.1465l.979-.9785A.53051.53051,0,0,0,17.666,10.125Z\"/></svg>',\n};\n\n// split arrays based on a predicate\n// unlike string.prototype.split, it works on\n// all arrays.\nexport const split = <T>(\n  predicate: (_: T) => boolean\n) => (arr: T[]): T[][] => {\n  const splitArrays = [];\n  let currSubArray = [];\n  for (let i = 0; i < arr.length; i++) {\n    if (predicate(arr[i])) {\n      splitArrays.push(currSubArray);\n      currSubArray = [];\n      continue;\n    }\n    currSubArray.push(arr[i]);\n  }\n  splitArrays.push(currSubArray);\n  return splitArrays;\n};\n\nexport const zip = <T, R>(\n  xs: T[],\n  ys: R[]\n): List<[T, R]> => {\n  const len = xs.length < ys.length\n            ? xs.length\n            : ys.length;\n  const result = new Array(len) as List<[T, R]>;\n  for (let i = 0; i < len; i = i + 1) {\n    result[i] = [xs[i], ys[i]];\n  }\n  return result;\n}\n\nexport const takeWhile = <T>(\n  predicate: (_: T) => boolean\n) => (arr: T[]): T[] => {\n  if (arr.length === 0)\n    return arr;\n  const [firstItem, ...remainingItems] = arr;\n  if (predicate(firstItem))\n    return [firstItem].concat(takeWhile(predicate)(remainingItems));\n  return [];\n};\n\nexport const dropWhile = <T>(\n  predicate: (_: T) => boolean\n) => (arr: T[]): T[] => {\n  if (arr.length === 0)\n    return arr;\n  const [firstItem, ...remainingItems] = arr;\n  if (predicate(firstItem))\n    return dropWhile(predicate)(remainingItems);\n  return remainingItems;\n};\n\nexport const getNextSiblings = (element: Element): Element[] => {\n  const accumulator = [];\n  let iterator = element.nextElementSibling as Element ?? null;\n  while(iterator !== null) {\n    accumulator.push(iterator);\n    iterator = iterator.nextElementSibling as Element ?? null;\n  }\n  return accumulator;\n};\n\ntype Alternative<ReturnType, InputType> = {\n  or: (\n    fallbackFn: (input: InputType) => ReturnType\n  ) => Alternative<ReturnType, InputType>;\n  eval: (input: InputType) => ReturnType;\n};\n\nexport const alternative = <ReturnType, InputType>(\n  primaryFn: (input: InputType) => ReturnType\n): Alternative<ReturnType, InputType> => {\n  return {\n    eval: primaryFn,\n    or: (fallbackFn) => alternative((input) => {\n      try {\n        return primaryFn(input)\n      } catch (_error) {\n        return fallbackFn(input);\n      }\n    })\n  }\n};\n\nexport const parseListAndAccumulateErrors = <\n  UnParsedObj,\n  ParsedObj,\n  ErrorType\n  >(\n  elements: List<UnParsedObj>,\n  parse: (element: UnParsedObj) => Parsed<ParsedObj, ErrorType>\n): Parsed<List<ParsedObj>, ErrorType> => elements.reduce(\n  ([accElems, accErrors], element) => {\n    try {\n      const [parsedElement, parseErrors] = parse(element);\n      return [\n        [...accElems, parsedElement],\n        [...accErrors, ...parseErrors]\n      ];\n    } catch (error) {\n      if (error instanceof IrrecoverableError) {\n        return [accElems, [\n          error as ErrorType,\n          ...accErrors]\n        ];\n      }\n      return [accElems, accErrors];\n    }\n  },\n  [[],[]] as Parsed<List<ParsedObj>, ErrorType>\n  );\n\ntype CleanupFunction = () => void;\ntype AddListeners = (gnav: HTMLElement) => CleanupFunction;\ntype ListenerSetupFunctions = {\n  mobileEventListeners: AddListeners;\n  desktopEventListeners: AddListeners;\n}\nexport const setupMobileDesktopListeners = ({\n  mobileEventListeners,\n  desktopEventListeners\n}: ListenerSetupFunctions) => (gnav: HTMLElement): void => {\n  let cleanup: CleanupFunction;\n  if (isDesktop.matches)\n    cleanup = desktopEventListeners(gnav);\n  else\n    cleanup = mobileEventListeners(gnav);\n\n  isDesktop.addEventListener('change', () => {\n    cleanup?.();\n    cleanup\n      = isDesktop.matches\n      ? desktopEventListeners(gnav)\n      : mobileEventListeners(gnav);\n  });\n};\n\nexport const fetchAndProcessPlainHTML = async (\n  source: URL | null\n): Promise<HTMLElement | IrrecoverableError> => {\n  try {\n    if (source === null)\n      return new IrrecoverableError('URL is null');\n    const modifiedSource = federateUrl(`${source.origin}${source.pathname.replace(/(\\.html$|$)/, '.plain.html')}${source.hash}`);\n    const response = await fetch(modifiedSource);\n    if (!response.ok)\n      return new IrrecoverableError(`Request for ${modifiedSource} failed`);\n    const htmlText = await response.text();\n  \n    const { body } = new DOMParser().parseFromString(htmlText, \"text/html\");\n    return body;\n  } catch (error) {\n    // @ts-expect-error errors usually have a message\n    return new IrrecoverableError(error?.message);\n  }\n};\n\n// TODO: refactor\nlet federatedContentRoot: string;\nexport const getFederatedContentRoot = (): string => {\n  if (federatedContentRoot) return federatedContentRoot;\n\n  const cdnWhitelistedOrigins = [\n    'https://www.adobe.com',\n    'https://business.adobe.com',\n    'https://blog.adobe.com',\n    'https://milo.adobe.com',\n    'https://news.adobe.com',\n    'graybox.adobe.com',\n  ];\n  if (federatedContentRoot) return federatedContentRoot;\n  // Non milo consumers will have its origin from config\n  // TODO: allow the passing of a configured origin\n  const origin = window.location.origin;\n\n  const isAllowedOrigin = cdnWhitelistedOrigins.some((o) => {\n    const originNoStage = origin.replace('.stage', '');\n    return o.startsWith('https://')\n      ? originNoStage === o\n      : originNoStage.endsWith(o);\n  });\n\n  federatedContentRoot = isAllowedOrigin ? origin : 'https://www.adobe.com';\n\n  const SLD = window.location.hostname.includes('.aem.') ? 'aem' : 'hlx';\n  if (origin.includes('localhost') || origin.includes(`.${SLD}.`)) {\n    federatedContentRoot = `https://main--federal--adobecom.aem.${origin.endsWith('.live') ? 'live' : 'page'}`;\n  }\n\n  return federatedContentRoot;\n};\n\n// TODO we should match the akamai patterns /locale/federal/\n// at the start of the url\n// and make the check more strict.\nexport const federateUrl = (url = ''): string => {\n  if (typeof url !== 'string' || !url.includes('/federal/')) return url;\n  if (url.startsWith('/')) return `${getFederatedContentRoot()}${url}`;\n  try {\n    const { pathname, search, hash } = new URL(url);\n    return `${getFederatedContentRoot()}${pathname}${search}${hash}`;\n  } catch (e) {\n    // @ts-expect-error errors usually have a message\n    console.log(`getFederatedUrl errored parsing the URL: ${url}: ${e?.message}`);\n  }\n  return url;\n};\n\nexport const inlineNestedFragments = async (\n  element: Element | HTMLElement\n): Promise<Element | HTMLElement | IrrecoverableError> => {\n  const processElement = async (\n    currentElem: Element | HTMLElement | IrrecoverableError,\n    visitedUrls: Set<string>\n  ): Promise<Element | HTMLElement | IrrecoverableError> => {\n    if (currentElem instanceof IrrecoverableError)\n      return currentElem;\n    try {\n      const anchorElements = [\n        ...currentElem.querySelectorAll('a[href*=\"#_inline\"]')\n      ] as HTMLAnchorElement[];\n      const inlineLinks = anchorElements\n        .map(async (anchorElement: HTMLAnchorElement) => {\n          try {\n            if (visitedUrls.has(anchorElement.href)) return;\n            const federatedUrl = federateUrl(anchorElement.href);\n            const fragmentUrl = new URL(federatedUrl);\n            const fragmentBody = await fetchAndProcessPlainHTML(fragmentUrl);\n            visitedUrls.add(anchorElement.href);\n            if (fragmentBody instanceof IrrecoverableError)\n              throw fragmentBody;\n            await processElement(fragmentBody, visitedUrls);\n            const parentDiv = anchorElement.closest('div');\n            if (parentDiv) {\n              parentDiv.replaceWith(...fragmentBody.children);\n            } else {\n              anchorElement.replaceWith(...fragmentBody.children);\n            }\n            return;\n          } catch {\n            return;\n          }\n        }, [] as List<[HTMLAnchorElement, URL]>)\n      await Promise.all(inlineLinks);\n      return currentElem\n    } catch (error) {\n      return new IrrecoverableError(JSON.stringify(error));\n    }\n  }\n  return processElement(element, new Set());\n};\n\nexport const renderListItems = <T>(\n  items: T[],\n  renderFn: (item: T) => string\n): string => {\n  return items.map(item => `<li>${renderFn(item)}</li>`).join('');\n};\n\nexport const sanitize = (str: string): string => {\n  return str\n    .toLowerCase()\n    .trim()\n    // Replace spaces and non-alphanumeric characters with hyphens\n    .replace(/[^a-z0-9]/g, '-')\n    // Remove multiple consecutive hyphens\n    .replace(/-+/g, '-')\n    // Remove leading/trailing hyphens\n    .replace(/^-+|-+$/g, '')\n    // Ensure it starts with a letter (prepend 'id-' if it starts with a number)\n    .replace(/^(\\d)/, 'id-$1')\n};\n\n\nexport const isDarkMode = (): boolean => {\n  // TODO: Implement dark mode detection\n  return true;\n};\n\n/**\n * Configuration options for dynamically loading link elements\n */\ntype LoadLinkOptions = {\n  id?: string;\n  as?: string;\n  callback?: (type: string) => void;\n  crossorigin?: string;\n  rel: string;\n  fetchpriority?: string;\n}\n\n/**\n * Dynamically loads a link element into the document head.\n * Prevents duplicate loading by checking if a link with the same href already exists.\n * \n * @param href - URL of the resource to load\n * @param options - Configuration options for the link element\n * @returns The created or existing HTMLLinkElement\n * \n * @example\n * // Load a stylesheet with high priority\n * loadLink('/styles/main.css', { \n *   rel: 'stylesheet', \n *   fetchpriority: 'high',\n *   callback: (type) => console.log(`Stylesheet ${type}`)\n * });\n */\nexport function loadLink(\n  href: string,\n  {\n    id,\n    as,\n    callback,\n    crossorigin,\n    rel,\n    fetchpriority,\n  }: LoadLinkOptions = { rel: 'stylesheet' }\n): HTMLLinkElement {\n  // Check if link already exists to prevent duplicates\n  let link = document.head.querySelector(`link[href=\"${href}\"]`) as HTMLLinkElement | null;\n  if (!link) {\n    // Create new link element with specified attributes\n    link = document.createElement('link');\n    link.setAttribute('rel', rel);\n    if (id) link.setAttribute('id', id);\n    if (as) link.setAttribute('as', as);\n    if (crossorigin) link.setAttribute('crossorigin', crossorigin);\n    if (fetchpriority) link.setAttribute('fetchpriority', fetchpriority);\n    link.setAttribute('href', href);\n    \n    // Attach load/error event handlers if callback provided\n    if (callback) {\n      link.onload = (e: Event) => callback(e.type);\n      link.onerror = (e: string | Event) => callback(typeof e === 'string' ? 'error' : e.type);\n    }\n    document.head.appendChild(link);\n  } else if (callback) {\n    // Link already exists, invoke callback with 'noop' to indicate no action taken\n    callback('noop');\n  }\n  return link;\n}\n\n/**\n * Convenience function to load a CSS stylesheet.\n * \n * @param href - URL of the stylesheet to load\n * @param callback - Optional callback invoked on load/error events\n * @returns The created or existing HTMLLinkElement\n */\nexport function loadStyle(href: string, callback?: (type: string) => void): HTMLLinkElement {\n  return loadLink(href, { rel: 'stylesheet', callback });\n}\n\n/**\n * Conditionally loads a stylesheet based on the override flag.\n * \n * @param url - URL of the stylesheet to load\n * @param override - Whether to load the stylesheet (defaults to false)\n */\nexport function loadStyles(url: string, override = false) {\n  if (!override) return;\n  loadStyle(url);\n}\n\n/**\n * Configuration options for dynamically loading script elements\n */\ntype LoadScriptOptions = {\n  /** Loading strategy: 'async' for parallel execution, 'defer' for sequential after DOM parsing */\n  mode?: 'async' | 'defer';\n  /** Unique identifier for the script element */\n  id?: string;\n};\n\n/**\n * Dynamically loads a JavaScript file into the document head.\n * Returns a Promise that resolves when the script loads successfully or rejects on error.\n * Prevents duplicate loading and tracks loaded state via data-loaded attribute.\n * \n * @param url - URL of the script to load\n * @param type - Script MIME type (e.g., 'module', 'text/javascript')\n * @param options - Configuration options for loading behavior\n * @returns Promise that resolves with the HTMLScriptElement on success\n * \n * @example\n * // Load a module script asynchronously\n * loadScript('/js/app.js', 'module', { mode: 'async' })\n *   .then(script => console.log('Script loaded'))\n *   .catch(error => console.error('Failed to load:', error));\n */\nexport const loadScript = (\n  url: string,\n  type?: string,\n  { mode, id }: LoadScriptOptions = {}\n): Promise<HTMLScriptElement> => new Promise((resolve, reject) => {\n  // Check if script already exists to prevent duplicates\n  let script = document.querySelector(`head > script[src=\"${url}\"]`) as HTMLScriptElement | null;\n  if (!script) {\n    // Create new script element with specified attributes\n    const { head } = document;\n    script = document.createElement('script');\n    script.setAttribute('src', url);\n    if (id) script.setAttribute('id', id);\n    if (type) {\n      script.setAttribute('type', type);\n    }\n    // Set loading mode (async or defer) if specified\n    if (mode && ['async', 'defer'].includes(mode)) script.setAttribute(mode, '');\n    head.append(script);\n  }\n\n  // If script was previously loaded, resolve immediately\n  if ((script as HTMLScriptElement).dataset.loaded) {\n    resolve(script as HTMLScriptElement);\n    return;\n  }\n\n  // Set up event handler for load and error events\n  const onScript = (event: Event) => {\n    (script as HTMLScriptElement).removeEventListener('load', onScript);\n    (script as HTMLScriptElement).removeEventListener('error', onScript);\n\n    if (event.type === 'error') {\n      reject(new Error(`error loading script: ${(script as HTMLScriptElement).src}`));\n    } else if (event.type === 'load') {\n      // Mark script as loaded to prevent re-execution\n      (script as HTMLScriptElement).dataset.loaded = 'true';\n      resolve(script as HTMLScriptElement);\n    }\n  };\n\n  script.addEventListener('load', onScript);\n  script.addEventListener('error', onScript);\n});\n\n/**\n * Retrieves metadata content from the document's head section.\n * Automatically determines whether to use 'name' or 'property' attribute based on the metadata name.\n * \n * Uses 'property' attribute for Open Graph and other namespaced metadata (containing ':'),\n * and 'name' attribute for standard HTML metadata.\n * \n * @param name - The metadata name or property to search for (e.g., 'description', 'og:title')\n * @param doc - The document to search in (defaults to current document)\n * @returns The metadata content value, or null if not found\n * \n * @example\n * // Get standard meta tag\n * const description = getMetadata('description');\n * \n * @example\n * // Get Open Graph meta tag\n * const ogTitle = getMetadata('og:title');\n */\nexport function getMetadata(name: string, doc: Document = document): string | null {\n  // Use 'property' for namespaced metadata (e.g., Open Graph), 'name' for standard metadata\n  const attr = name && name.includes(':') ? 'property' : 'name';\n  const meta = doc.head.querySelector(`meta[${attr}=\"${name}\"]`) as HTMLMetaElement | null;\n  return meta && meta.content;\n}\n\ntype MiloConfigEnv = {\n  name: string;                    // REQUIRED - Environment name: 'local', 'stage', or 'prod'\n  ims?: string;                    // IMS environment: 'stg1' or 'prod'\n  adobeIO?: string;                // Adobe I/O hostname\n  adminconsole?: string;           // Admin Console hostname\n  account?: string;                // Account hostname\n  edgeConfigId?: string;           // Edge configuration ID\n  pdfViewerClientId?: string;      // PDF Viewer client ID\n  consumer?: {                     // Consumer-specific configuration (optional)\n    pdfViewerClientId: string;\n    pdfViewerReportSuite: string;\n    psUrl: string;\n    odinEndpoint: string;\n  };\n};\n\ntype MiloConfigLocale = {\n  prefix: string;                  // REQUIRED - e.g., '', '/fr', '/de', '/jp/ja'\n  ietf?: string;                   // e.g., 'en-US', 'fr-FR', 'de-DE'\n  tk?: string;                     // Typekit font ID, e.g., 'hah7vzn.css'\n  region?: string;                 // Region/country code, e.g., 'us', 'gb', 'fr'\n  regions?: Record<string, unknown>; // Regional configuration mapping\n  contentRoot?: string;            // Full content path with origin\n  language?: string;               // Language code (new routing), e.g., 'en', 'fr', 'de'\n  dir?: string;                    // Text direction: 'ltr' or 'rtl'\n  \n  // Allow additional locale-specific properties\n  [key: string]: unknown;          // Additional locale configuration\n};\n\ntype UnavProfileConfig = {\n  messageEventListener?: (event: CustomEvent) => void;\n  complexConfig?: Record<string, any> | null;\n  config?: Record<string, any>;\n  signInCtaStyle?: 'primary' | 'secondary';\n}\n\ntype UnavConfig = {\n  unavHelpChildren?: Array<{ type: string }>;\n  profile?: UnavProfileConfig;\n  uncAppId?: string;\n  uncConfig?: Record<string, any>;\n  showSectionDivider?: boolean;\n}\n\ntype JarvisConfig = {\n  id: string;\n  callbacks?: Record<string, Function>;\n}\n\nexport type MiloConfig = {\n  env: MiloConfigEnv;\n  locale: MiloConfigLocale;\n  unav?: UnavConfig;\n  jarvis?: JarvisConfig;\n  signInContext?: object;          // IMS sign-in context for UNAV\n};\n\n/**\n * Validates MiloConfig structure at runtime\n * @param config - Configuration object to validate\n * @returns true if valid, false otherwise\n */\nconst isValidMiloConfig = (config: unknown): config is MiloConfig => {\n  if (!config || typeof config !== 'object') return false;\n  \n  const cfg = config as Record<string, unknown>;\n  \n  // Validate locale structure\n  if (!cfg.locale || typeof cfg.locale !== 'object') return false;\n  const locale = cfg.locale as Record<string, unknown>;\n  if (typeof locale.prefix !== 'string') return false;\n  \n  // Validate env structure\n  if (!cfg.env || typeof cfg.env !== 'object') return false;\n  const env = cfg.env as Record<string, unknown>;\n  if (typeof env.name !== 'string') return false;\n  \n  // Validate optional unav structure\n  if (cfg.unav !== undefined) {\n    if (typeof cfg.unav !== 'object' || cfg.unav === null) return false;\n    const unav = cfg.unav as Record<string, unknown>;\n    \n    // Validate unav.profile if present\n    if (unav.profile !== undefined) {\n      if (typeof unav.profile !== 'object' || unav.profile === null) return false;\n      const profile = unav.profile as Record<string, unknown>;\n      \n      // Validate signInCtaStyle if present\n      if (profile.signInCtaStyle !== undefined) {\n        if (profile.signInCtaStyle !== 'primary' && profile.signInCtaStyle !== 'secondary') {\n          return false;\n        }\n      }\n      \n      // Validate messageEventListener if present\n      if (profile.messageEventListener !== undefined && typeof profile.messageEventListener !== 'function') {\n        return false;\n      }\n    }\n  }\n  \n  // Validate optional jarvis structure\n  if (cfg.jarvis !== undefined) {\n    if (typeof cfg.jarvis !== 'object' || cfg.jarvis === null) return false;\n    const jarvis = cfg.jarvis as Record<string, unknown>;\n    \n    // id is required if jarvis object exists\n    if (typeof jarvis.id !== 'string') return false;\n  }\n  \n  return true;\n};\n\n/**\n * MiloConfig Configuration State Management\n * Implements closure-based singleton pattern for global configuration with validation\n * \n * @throws Error if config validation fails or if accessed before initialization\n */\nexport const [setMiloConfig, getMiloConfig] = (() => {\n  let miloConfig: MiloConfig | undefined;\n  let isInitialized = false;\n\n  return [\n    (config: unknown): void => {\n      if (isInitialized) {\n        return;\n      }\n\n      // Validate config structure\n      if (!isValidMiloConfig(config)) {\n        throw new Error('MiloConfig validation failed: Invalid structure');\n      }\n\n      miloConfig = config;\n      isInitialized = true;\n    },\n    (): MiloConfig => {\n      if (!miloConfig) {\n        throw new Error('MiloConfig not initialized. Call setMiloConfig() first.');\n      }\n      return miloConfig;\n    },\n  ];\n})();", "import { IrrecoverableError, RecoverableError } from \"../../Error/Error\";\nimport { icons, isDarkMode } from \"../../Utils/Utils\";\n\ntype ImageData =\n  | { type: 'inline-svg'; svgContent: string; alt: string }\n  | { type: 'image'; src: string; alt: string };\n\nexport type Brand = {\n  type: 'Brand';\n  data: { type: 'LabelledBrand'; href: string; label: string; image: ImageData }\n  | { type: 'BrandImageOnly'; href: string; image: ImageData; alt: string }\n  | { type: 'ImageOnlyBrand'; href: string; image: ImageData; alt: string }\n  | { type: 'BrandLabelOnly'; href: string; label: string }\n  | { type: 'NoRender' };\n};\nconst ERRORS = {\n  elementNull: \"Error when parsing Brand. Element is null\",\n  noLinks: \"Error when parsing Brand. No links found\",\n  noPrimaryLink: \"Error when parsing Brand. No primary link found\",\n};\n\nconst IMG_REGEX = /(\\.png|\\.jpg|\\.jpeg|\\.svg)/i;\n\n/**\n * Extracts image source from a link element or picture element\n */\nconst extractImageSource = (element: Element): string | null => {\n  const imgSrc = element.querySelector('picture img')?.getAttribute('src') ?? null;\n  if (imgSrc !== null && imgSrc !== '') return imgSrc;\n\n  const text = element.textContent?.trim();\n  if (text !== undefined && text !== '' && IMG_REGEX.test(text)) {\n    const source = text.split('|')[0]?.trim();\n    if (source !== undefined && source !== '') return source;\n  }\n\n  const href = element.getAttribute('href');\n  return href !== null && href !== '' && IMG_REGEX.test(href) ? href : null;\n};\n\n/**\n * Extracts alt text from image content\n */\nconst extractAltText = (element: Element): string => {\n  const text = element.textContent?.trim();\n\n  if (text?.includes('|') === true) {\n    const alt = text.split('|')[1]?.trim();\n    if (alt) return alt;\n  }\n\n  const altAttr = element.querySelector('img')?.getAttribute('alt');\n  return altAttr ?? '';\n};\n\nexport const parseBrand = (\n  element: Element | null,\n): Parsed<Brand, RecoverableError> => {\n  if (element === null) {\n    throw new IrrecoverableError(ERRORS.elementNull);\n  }\n\n  const rawBlock = element.querySelector('.gnav-brand');\n  if (rawBlock === null) {\n    throw new IrrecoverableError(ERRORS.elementNull);\n  }\n\n  const blockLinks = [...rawBlock.querySelectorAll('a')] as HTMLAnchorElement[];\n  if (blockLinks.length === 0) {\n    throw new IrrecoverableError(ERRORS.noLinks);\n  }\n\n  // Find the primary (non-image) link\n  const primaryLink = blockLinks.find((link) => {\n    const textContent = link.textContent ?? '';\n    return !IMG_REGEX.test(link.href) && !IMG_REGEX.test(textContent);\n  });\n\n  if (!primaryLink) {\n    throw new IrrecoverableError(ERRORS.noPrimaryLink);\n  }\n\n  // Determine rendering flags based on CSS classes\n  const isBrandImageOnly = rawBlock.matches('.brand-image-only');\n  const noLogo = rawBlock.matches('.no-logo');\n  const imageOnly = rawBlock.matches('.image-only');\n  const renderImage = !noLogo;\n  const renderLabel = !isBrandImageOnly && !imageOnly;\n\n  // Get image links for extracting image sources and alt text\n  const imageLinks = blockLinks.filter((link) => {\n    const textContent = link.textContent ?? '';\n    return IMG_REGEX.test(link.href) || IMG_REGEX.test(textContent);\n  });\n\n  // Extract image sources (light and dark mode) and alt text\n  const [imgSrc, imgSrcDark, altText] = ((): [\n    string, \n    string | null, \n    string\n  ] => {\n    const defaultImgSrc = isBrandImageOnly ? icons.brand : icons.company;\n  \n    const [svgImgSrc = null, svgDarkImgSrc = null] = ([...rawBlock.querySelectorAll('picture img[src$=\".svg\"]')] as HTMLImageElement[])\n      .map((img) => img?.src)\n      .filter((src) => src?.length > 0);\n  \n    const [imgSrc = null, imgSrcDark = null] = \n      imageLinks.map(extractImageSource);\n    const altText = imageLinks[0] instanceof Element\n                  ? extractAltText(imageLinks[0])\n                  : primaryLink.textContent?.trim() ?? '';\n  \n    return [\n      imgSrc ?? svgImgSrc ?? defaultImgSrc,\n      imgSrcDark ?? svgDarkImgSrc,\n      altText\n    ];\n  })();\n\n  const label = primaryLink.textContent?.trim() ?? '';\n  const href = primaryLink.href;\n\n  if (!renderImage && !renderLabel) return [{ type: 'Brand', data: { type: 'NoRender' } }, []];\n\n  const selectSource = (light: string, dark: string | null): string => {\n    const hasDark = dark !== null && dark !== undefined && dark !== '';\n    return isDarkMode() && hasDark ? dark : light;\n  };\n\n  const imageData: ImageData = imgSrc.startsWith('<svg')\n    ? { type: 'inline-svg', svgContent: selectSource(imgSrc, imgSrcDark), alt: altText }\n    : { type: 'image', src: selectSource(imgSrc, imgSrcDark), alt: altText };\n\n  if (renderImage && renderLabel) {\n    return [{ type: 'Brand', data: { type: 'LabelledBrand', href, label, image: imageData } }, []];\n  }\n\n  if (renderImage && isBrandImageOnly) {\n    return [{ type: 'Brand', data: { type: 'BrandImageOnly', href, image: imageData, alt: altText } }, []];\n  }\n\n  if (renderImage && imageOnly) {\n    return [{ type: 'Brand', data: { type: 'ImageOnlyBrand', href, image: imageData, alt: altText } }, []];\n  }\n\n  return [{ type: 'Brand', data: { type: 'BrandLabelOnly', href, label } }, []];\n};\n", "\n        const css = \".feds-brand-container {\\n    display: flex;\\n    flex-shrink: 0;\\n}\\n\\n.feds-brand {\\n    display: flex;\\n}\\n\\n.feds-brand,\\n.feds-logo {\\n    align-items: center;\\n    outline-offset: 2px;\\n    padding: 0 var(--feds-gutter);\\n    column-gap: 10px;\\n}\\n\\n.feds-brand-image,\\n.feds-logo-image {\\n    width: 25px;\\n    flex-shrink: 0;\\n}\\n\\n.feds-brand-image.brand-image-only {\\n    height: 36px;\\n    width: auto;\\n    min-width: 66px;\\n}\\n\\n.feds-brand-image.brand-image-only picture,\\n.feds-brand-image.brand-image-only img,\\n.feds-brand-image.brand-image-only svg {\\n    width: auto;\\n    height: 100%;\\n}\\n\\n.feds-brand-image picture,\\n.feds-brand-image img,\\n.feds-brand-image svg,\\n.feds-logo-image picture,\\n.feds-logo-image img,\\n.feds-logo-image svg {\\n    width: 100%;\\n    display: block;\\n}\\n\\n.feds-brand-label,\\n.feds-logo-label {\\n    flex-shrink: 0;\\n    font-weight: 700;\\n    font-size: 18px;\\n    color: var(--feds-color-adobeBrand);\\n}\\n\\n@media (min-width: 900px) {\\n    .feds-brand-image+.feds-brand-label {\\n        display: flex;\\n    }\\n}\";\n        const style = document.createElement('style');\n        style.textContent = css;\n        document.head.appendChild(style);\n      ", "import { Brand } from \"./Parse\";\nimport './brand.css';\n\ntype ImageData = Extract<Brand['data'], { image: unknown }>['image'];\n\nconst renderImage = (image: ImageData, imageOnly: boolean): string => {\n  const cls = `feds-brand-image${imageOnly ? ' brand-image-only' : ''}`;\n  \n  if (image.type === 'inline-svg') {\n    return `<span class=\"${cls}\">${image.svgContent}</span>`;\n  }\n\n  const alt = image.alt ? ` alt=\"${image.alt}\"` : '';\n  return `<span class=\"${cls}\"><img src=\"${image.src}\"${alt} /></span>`;\n};\n\nconst renderBrand = (href: string, content: string, ariaLabel = ''): HTML =>\n  `<div class=\"feds-brand-container\">\n    <a href=\"${href}\" class=\"feds-brand\" daa-ll=\"Brand\"${ariaLabel}>\n      ${content}\n    </a>\n  </div>`.trim();\n\nexport const brand = (brandData: Brand): HTML => {\n  const { data } = brandData;\n  switch (data.type) {\n    case 'LabelledBrand':\n      return renderBrand(\n        data.href,\n        renderImage(data.image, false) +\n        `<span class=\"feds-brand-label\">${data.label}</span>`\n      );\n\n    case 'BrandImageOnly': {\n      const aria = data.alt ? ` aria-label=\"${data.alt}\"` : '';\n      return renderBrand(\n        data.href,\n        renderImage(data.image, true),\n        aria\n      );\n    }\n\n    case 'ImageOnlyBrand': {\n      const aria = data.alt ? ` aria-label=\"${data.alt}\"` : '';\n      return renderBrand(\n        data.href,\n        renderImage(data.image, false),\n        aria\n      );\n    }\n\n    case 'BrandLabelOnly':\n      return renderBrand(\n        data.href,\n        `<span class=\"feds-brand-label\">${data.label}</span>`\n      );\n\n    case 'NoRender':\n      return '';\n\n    default:\n      data satisfies never;\n      return '';\n  }\n};", "import { IrrecoverableError, RecoverableError } from \"../../Error/Error\";\n\nexport type Link = {\n  type: 'Link';\n  text: string;\n  href: string;\n};\n\nconst ERRORS = {\n  elementNull: \"Error when parsing Link. Element is null\",\n  notAnchor: \"Cannot parse non-anchor as Link\",\n  textContentNotFound: \"Error when parsing Link. Element has no textContent\",\n  hrefNotFound: \"Element has no href\",\n}\n\nexport const parseLink = (\n  anchor: Element | null\n): Parsed<Link, RecoverableError> => {\n  if (anchor === null)\n    throw new IrrecoverableError(ERRORS.elementNull);\n\n  if (anchor.tagName !== 'A')\n    throw new IrrecoverableError(ERRORS.notAnchor);\n\n  const text = anchor?.textContent ?? '';\n  if (text === '')\n    throw new IrrecoverableError(ERRORS.textContentNotFound)\n\n  const href = anchor?.getAttribute(\"href\") ?? '';\n  if (href === '')\n    throw new IrrecoverableError(ERRORS.hrefNotFound);\n\n  return [\n    {\n      type: \"Link\",\n      text,\n      href\n    },\n    []\n  ];\n};\n", "import { RecoverableError } from \"../../Error/Error\";\nimport { alternative } from \"../../Utils/Utils\";\nimport { parseLink } from \"../Link/Parse\";\n\nexport type PrimaryCTA = {\n  type: \"PrimaryCTA\";\n  text: string;\n  href: string;\n};\n\nexport type SecondaryCTA = {\n  type: \"SecondaryCTA\";\n  text: string;\n  href: string;\n};\n\nexport type ProductEntryCTA = PrimaryCTA | SecondaryCTA;\n\nconst parseCTA = (\n  type: Pick<CTA, 'type'>\n) => (\n  element: Element | null\n): Parsed<CTA, RecoverableError> => {\n  if (element === null)\n    throw new Error('');\n\n  const anchor = element.querySelector(getSelector(type));\n  if (!anchor)\n    throw new Error('');\n\n  const [{ text, href }, es] = parseLink(anchor);\n  return [\n    {\n      type: type.type,\n      text,\n      href,\n    },\n    es\n  ]\n}\n\nexport const parsePrimaryCTA = parseCTA({ type: \"PrimaryCTA\" });\n\nexport const parseSecondaryCTA = parseCTA({ type: \"SecondaryCTA\" });\n\nexport const parseProductEntryCTA = (\n  element: Element | null\n): Parsed<ProductEntryCTA, RecoverableError> => alternative(parsePrimaryCTA)\n  .or(parseSecondaryCTA)\n  .eval(element);\n\ntype CTA\n  = PrimaryCTA\n  | SecondaryCTA;\n\nconst getSelector = ({ type }: Pick<CTA, 'type'>): string => {\n  switch (type) {\n    case \"PrimaryCTA\": return 'strong > a';\n    case \"SecondaryCTA\": return 'em > a';\n    default: throw new Error('');\n  }\n}\n\n", "import { PrimaryCTA, ProductEntryCTA, SecondaryCTA } from \"./Parse\";\n\nexport const primaryCTA = ({\n  text,\n  href\n}: PrimaryCTA): HTML => `\n<a href=\"${href}\" class=\"feds-primary-cta\">\n  ${text}\n</a>\n`;\n\nexport const secondaryCTA = ({\n  text,\n  href\n}: SecondaryCTA): HTML => `\n<a href=\"${href}\" class=\"feds-secondary-cta\">\n  ${text}\n</a>\n`;\n\nexport const productEntryCTA = (\n  cta: ProductEntryCTA\n): HTML => {\n  if (cta.type === \"PrimaryCTA\")\n    return primaryCTA(cta);\n  return secondaryCTA(cta);\n}\n\n", "import { Link } from \"./Parse\";\n\nexport const link = ({\n  text,\n  href\n}: Link): HTML => `<a class=\"feds-link\" href=\"${href}\">${text}</a>`;\n", "import { IrrecoverableError, RecoverableError } from \"../../Error/Error\";\nimport { alternative } from \"../../Utils/Utils\";\nimport { Link, parseLink } from \"../Link/Parse\";\n\nexport type LinkGroupHeader = {\n  type: \"LinkGroupHeader\";\n  title: string;\n  classes: string[];\n};\n\nexport type LinkGroupLink = {\n  type: \"LinkGroupLink\";\n  iconHref: string | null;\n  iconAlt: string | null;\n  title: string;\n  href: string;\n  subtitle: string;\n}\n\nexport type LinkGroupBlue = {\n  type: \"LinkGroupBlue\";\n  link: Link;\n};\n\nexport type LinkGroup\n  = LinkGroupHeader\n  | LinkGroupLink\n  | LinkGroupBlue;\n\n\nexport const parseLinkGroup = (\n  element: Element | null\n): Parsed<LinkGroup, RecoverableError> => \n  alternative(parseLinkGroupHeader)\n    .or(parseLinkGroupLink)\n    .or(parseLinkGroupBlue)\n    .eval(element);\n\n/* example structure of a link group\n*\n* <div class=\"link-group\">\n*   <div>\n*     <div><a href=\"/federal/assets/svgs/creative-cloud-40.svg\">https://main--federal--adobecom.hlx.page/federal/assets/svgs/creative-cloud-40.svg | Adobe Creative Cloud</a></div>\n*     <div>\n*       <p><a href=\"https://www.adobe.com/creativecloud.html\">What is Creative Cloud?</a></p>\n*       <p>Creative apps and services for everyone</p>\n*     </div>\n*   </div>\n* </div>\n*  \n* Sometimes it's slightly different\n* <div class=\"link-group gray-gradient bold header\">\n    <div>\n      <div></div>\n      <div>\n        <h5 id=\"document-productivity\"><a href=\"bookmark://_document-productivity\">Document productivity</a></h5>\n      </div>\n    </div>\n  </div>\n*\n*/\n\nconst ERRORS = {\n  elementNull: \"Element not found\",\n  noTitleAnchor: \"Title anchor not found\",\n  noHref: \"Title Anchor has no href\",\n  noTitle: \"Title text not found\",\n  noSubtitleP: \"Subtitle <p> not found\",\n  noSubtitle: \"Subtitle text not found\",\n  notAHeader: \"Expected a Header class\",\n};\n\nconst parseLinkGroupLink = (\n  element: Element | null\n): Parsed<LinkGroup, RecoverableError> => {\n  const errors = new Set<RecoverableError>();\n  if (!element)\n    throw new IrrecoverableError(ERRORS.elementNull);\n\n  const titleElement = element.querySelector(\"p a\");\n  if (!titleElement)\n    throw new IrrecoverableError(ERRORS.noTitleAnchor);\n\n  const title = titleElement.textContent ?? '';\n  if (title === '')\n    errors.add(new RecoverableError(ERRORS.noTitle));\n\n  const href = titleElement.getAttribute(\"href\") ?? '';\n  if (href === '')\n    errors.add(new RecoverableError(ERRORS.noHref));\n\n  const subtitleElement = titleElement\n    ?.closest(\"p\")\n    ?.nextElementSibling;\n  if (!subtitleElement)\n    throw new IrrecoverableError(ERRORS.noSubtitleP);\n\n  const subtitle = subtitleElement.textContent ?? '';\n  if (subtitle === '')\n    errors.add(new RecoverableError(ERRORS.noSubtitle));\n\n  const [iconHref = null, iconAlt = null] = (element\n    .firstElementChild\n    ?.firstElementChild\n    ?.textContent\n    ?.split(\"|\") ?? []).map(x => x.trim());\n  return [\n    {\n      type: \"LinkGroupLink\",\n      iconHref,\n      iconAlt,\n      title,\n      href,\n      subtitle\n    },\n    [...errors]\n  ]\n}\n\nconst parseLinkGroupHeader = (\n  element: Element | null\n): Parsed<LinkGroup, RecoverableError> => {\n  if (!element)\n    throw new IrrecoverableError(ERRORS.elementNull);\n  \n  const classes = [...element.classList];\n\n  if(!classes.includes('header'))\n    throw new IrrecoverableError(ERRORS.notAHeader);\n\n  const title = element.querySelector('a')?.textContent ?? \"\";\n  if(title === \"\")\n    throw new IrrecoverableError(ERRORS.noTitle);\n\n  return [\n    {\n      type: \"LinkGroupHeader\",\n      title,\n      classes,\n    },\n    []\n  ];\n};\n\nconst parseLinkGroupBlue = (\n  element: Element | null\n): Parsed<LinkGroup, RecoverableError> => {\n  if (!element)\n    throw new IrrecoverableError(ERRORS.elementNull);\n\n  if (!element.classList.contains('blue'))\n    throw new Error('Not a Blue Link Group');\n\n  const a = element.querySelector('a');\n  const [link, es] = parseLink(a);\n\n  return [\n    {\n      type: \"LinkGroupBlue\",\n      link\n    },\n    es\n  ];\n};\n", "import { IrrecoverableError, RecoverableError } from \"../../Error/Error\";\nimport { alternative, getNextSiblings, parseListAndAccumulateErrors, split, takeWhile } from \"../../Utils/Utils\";\nimport { parsePrimaryCTA, parseSecondaryCTA, PrimaryCTA, SecondaryCTA } from \"../CTA/Parse\";\nimport { Link, parseLink } from \"../Link/Parse\";\nimport { LinkGroup, parseLinkGroup } from \"../LinkGroup/Parse\";\n\nexport type Tab = {\n  type: \"Tab\";\n  title: string | null;\n  CTA: PrimaryCTA | undefined;\n  columns: List<List<ColumnItem>> | MenuPromo;\n};\n\n// We have to return a list of Tabs here because\n// SingleColumnSectionList is essentially a list\n// of tabs. A tab is essentially a Column Section\n// from the old paradigm\nexport const parseTab = (\n  el: Element\n): Parsed<List<Tab>, RecoverableError> => {\n  const [parsedColumn, errors] = parseColumn(el);\n  return ((): Parsed<Tab[], RecoverableError> => {\n    switch (parsedColumn.type) {\n      case \"SingleColumnSection\":\n        return [\n          [{\n            type: \"Tab\",\n            title: parsedColumn.title,\n            columns: [parsedColumn.items],\n            CTA: getTabCTA(parsedColumn),\n          }],\n          errors\n        ];\n      case \"SingleColumnSectionList\":\n        return [\n          parsedColumn.sections.flatMap(section => ({\n            type: \"Tab\",\n            title: section.title,\n            columns: [section.items],\n            CTA: getTabCTA(section),\n          })),\n          errors\n        ]\n      case \"MultiColumnSection\":\n        return [\n          [{\n            type: \"Tab\",\n            title: parsedColumn.title,\n            columns: parsedColumn.columns,\n            CTA: getTabCTA(parsedColumn)\n          }],\n          errors\n        ];\n      case \"MenuPromo\":\n        return [\n          [{\n            type: \"Tab\",\n            title: \"More\", // TODO: Implement Placeholders\n            columns: parsedColumn,\n            CTA: undefined\n          }],\n          errors\n        ];\n      default: parsedColumn satisfies never; return [[], []];\n    }\n  })();\n};\n\nconst getTabCTA = (\n  section: SingleColumnSection | MultiColumnSection\n): PrimaryCTA | undefined => {\n  if (section.type === 'SingleColumnSection') {\n    return section.items\n      .find(item => item.type === 'PrimaryCTA');\n  }\n  return section.columns\n    .flat()\n    .find(item => item.type === 'PrimaryCTA');\n}\n\nexport type Column\n  = SingleColumnSection\n  | SingleColumnSectionList\n  | MultiColumnSection\n  | MenuPromo;\n\ntype ColumnParser = (_: Element)\n  => Parsed<Column, RecoverableError>;\n\nconst parseColumn = (\n  el: Element\n): Parsed<Column, RecoverableError> =>\n  alternative(parseSingleColumnSectionList as ColumnParser)\n    .or(parseSingleColumnSection)\n    .or(parseMultiColumnSection)\n    .or(parseMenuPromo)\n    .eval(el);\n\nexport type ColumnItem\n  = LinkGroup\n  | Link\n  | PrimaryCTA\n  | SecondaryCTA;\n\nconst parseColumnItems = (\n  items: List<Element>\n): Parsed<List<ColumnItem>, RecoverableError> =>\n  parseListAndAccumulateErrors(items, (item) =>\n    alternative(\n      parseLinkGroup as (_: Element) => Parsed<ColumnItem, RecoverableError>)\n      .or(parsePrimaryCTA)\n      .or(parseSecondaryCTA)\n      .or(parseLink)\n      .eval(item)\n  );\n\nconst extractColumnItems = (\n  elements: List<Element>\n): List<Element> =>\n  elements.flatMap(item => {\n    if (item.nodeName === 'UL')\n      return [...item.querySelectorAll('li > a')];\n    return [item];\n  });\n\nexport type SingleColumnSection = {\n  type: \"SingleColumnSection\";\n  title: string | null;\n  items: List<ColumnItem>;\n};\n\nconst parseSingleColumnSection = (\n  element: Element\n): Parsed<SingleColumnSection, RecoverableError> => {\n\n  if (element.querySelector('.gnav-promo')) \n    throw new Error('This is a promo');\n\n  if (element.querySelector('.column-break'))\n    throw new IrrecoverableError(\"Has a column break\");\n\n  const h5 = element.firstElementChild;\n  if (h5 === null)\n    throw new IrrecoverableError(\"No Children\"); // TODO put this into ERRORS\n\n  const title\n    = h5.nodeName === 'H5'\n    ? (h5.textContent ?? null)\n    : null\n  const columnItems\n    = h5.nodeName === 'H5'\n    ? getNextSiblings(h5)\n    : [...element.children];\n  const rawLinks = extractColumnItems(columnItems);\n  const [items, es] = parseColumnItems(rawLinks);\n\n  return [\n    {\n      type: \"SingleColumnSection\",\n      title,\n      items\n    },\n    es\n  ];\n}\n\nexport type SingleColumnSectionList = {\n  type: \"SingleColumnSectionList\";\n  sections: List<SingleColumnSection>;\n};\n\nexport const parseSingleColumnSectionList = (\n  element: Element\n): Parsed<SingleColumnSectionList, RecoverableError> => {\n  if (element.querySelector('.column-break'))\n    throw new IrrecoverableError(\"Has a column break\");\n\n  const h5s = [...element.querySelectorAll('h5')];\n  if (h5s.length <= 1)\n    throw new IrrecoverableError(\"Not a section list\");\n\n  const parseSection = (\n    h5: Element\n  ): Parsed<SingleColumnSection, RecoverableError> => {\n    const container = document.createElement('div');\n    const listItems = \n      takeWhile(\n        (x: Element) =>\n          x.nodeName !== 'H5')(getNextSiblings(h5));\n    container.append(h5, ...listItems);\n    return parseSingleColumnSection(container);\n  };\n  const [sections, es]\n    = parseListAndAccumulateErrors(h5s, parseSection);\n\n  return [\n    {\n      type: \"SingleColumnSectionList\",\n      sections\n    },\n    es\n  ];\n};\n\nexport type MultiColumnSection = {\n  type: \"MultiColumnSection\";\n  title: string;\n  columns: List<List<ColumnItem>>;\n};\n\nconst parseMultiColumnSection = (\n  element: Element\n): Parsed<MultiColumnSection, RecoverableError> => {\n  if (!element.querySelector('.column-break'))\n    throw new IrrecoverableError(\"Expected a Column Break\");\n  const h5 = element.firstElementChild;\n  if (h5 === null || h5.nodeName !== 'H5')\n    throw new IrrecoverableError(ERRORS.expectedH5);\n  const title = h5.textContent;\n  if (title === '' || title === null)\n    throw new IrrecoverableError(ERRORS.emptyTitle);\n\n  const isColumnBreak = (x: Element): boolean =>\n    x.classList.contains('column-break')\n  const rawColumns =\n    split(isColumnBreak)(getNextSiblings(h5))\n      .map(extractColumnItems);\n  const [columns, es] =\n    parseListAndAccumulateErrors(rawColumns, parseColumnItems);\n\n  return [\n    {\n      type: \"MultiColumnSection\",\n      title,\n      columns\n    },\n    es\n  ];\n};\n\nexport type MenuPromo = {\n  type: \"MenuPromo\";\n  content: HTML;\n};\n\nexport const parseMenuPromo = (\n  element: Element | null\n): Parsed<MenuPromo, RecoverableError> => {\n  if (element === null)\n    throw new IrrecoverableError(ERRORS.elementNull);\n  // TODO: Should gnav-image be treated differently?\n  const promo = element.querySelector('.gnav-promo, .gnav-image');\n  if (promo === null)\n    throw new IrrecoverableError(ERRORS.noPromo);\n  const content = promo.innerHTML ?? '';\n  if (content === '')\n    throw new IrrecoverableError(ERRORS.noPromoContent);\n  return [\n    {\n      type: \"MenuPromo\",\n      content\n    },\n    []\n  ]\n};\n\nconst ERRORS = {\n  expectedH5: \"Expected an H5 element for the title \",\n  emptyTitle: \"Expected Title to not be empty\",\n  elementNull: \"Element is null\",\n  noPromo: \"Promo or gnav image not found\",\n  noPromoContent: \"Promo Content not found\",\n};\n", "import { IrrecoverableError, RecoverableError } from \"../../Error/Error\";\nimport { fetchAndProcessPlainHTML, inlineNestedFragments, parseListAndAccumulateErrors } from \"../../Utils/Utils\";\nimport { parseTab } from \"../Tab/Parse\";\nimport { Link, parseLink } from \"../Link/Parse\";\nimport { Tab } from \"../Tab/Parse\";\n\n\nexport type MegaMenu = {\n  type: \"MegaMenu\";\n  title: string;\n  tabs: Promise<Parsed<List<Tab>, RecoverableError>>;\n  crossCloudMenu: List<Link>;\n  isSection: boolean;\n};\n\n\nexport const parseMegaMenu = (\n  element: Element | null\n): Parsed<MegaMenu, RecoverableError> => {\n  const errors = new Set<RecoverableError>();\n  if (element === null)\n    throw new IrrecoverableError(ERRORS.elementNull);\n\n  const title = element.querySelector('h2')?.textContent ?? \"\";\n  if (title === \"\")\n    errors.add(new RecoverableError(ERRORS.noTitle))\n\n  const tabs = (async (): \n                   Promise<Parsed<List<Tab>, RecoverableError>> => {\n    try {\n      const fragment: HTMLAnchorElement | null = element.querySelector('h2 > a');\n      const fragmentURL = new URL(fragment?.href ?? \"\");\n      const initialFragment =\n        await fetchAndProcessPlainHTML(fragmentURL);\n      if (initialFragment instanceof IrrecoverableError)\n        throw new Error(initialFragment.message);\n      const megaMenuFragment = await inlineNestedFragments(initialFragment);\n      if (megaMenuFragment instanceof IrrecoverableError)\n        throw new Error(megaMenuFragment.message);\n      const unparsedTabs = [...megaMenuFragment.children]\n      const [tabs, errors] = parseListAndAccumulateErrors(\n        unparsedTabs,\n        parseTab,\n      );\n      return [tabs.flat(), errors];\n    } catch (e) {\n        // @ts-expect-error errors usually have a message\n        throw new IrrecoverableError(e?.message);\n    }\n  })();\n  const unparsedCrossCloud = element.querySelectorAll(\n    '.cross-cloud-menu ul > li > a'\n  );\n  const [crossCloudMenu, ccmErrors] = parseListAndAccumulateErrors(\n    [...unparsedCrossCloud],\n    parseLink\n  );\n\n  const isSection = element.classList.contains('section');\n\n  return [\n    {\n      type: \"MegaMenu\",\n      title,\n      tabs,\n      crossCloudMenu,\n      isSection\n    },\n    [\n      ...ccmErrors,\n      ...errors\n    ]\n  ]\n};\n\nconst ERRORS = {\n  elementNull: \"Element is null\",\n  noTitle: \"Large Menu has no Title\",\n};\n", "\n        const css = \".mega-menu::after {\\n  content: '';\\n  display: inline-block;\\n  width: 6px;\\n  height: 6px;\\n  margin-left: 8px;\\n  border-right: 2px solid currentColor;\\n  border-bottom: 2px solid currentColor;\\n  transform: rotate(45deg) translateY(-1px);\\n  transform-origin: center;\\n  transition: transform 150ms ease;\\n  pointer-events: none;\\n}\\n\\n.mega-menu:has(+ .feds-popup:popover-open)::after {\\n  transform: rotate(-135deg) translateY(1px);\\n  margin-top: 8px;\\n}\\n\\n.feds-popup {\\n  display: none;\\n}\\n\\n.feds-popup:popover-open {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: start;\\n    translate: 0;\\n    opacity: 1;\\n    z-index: 2;\\n    transition: translate 0.4s ease-out, opacity 0.2s ease, visibility 0s linear 0s;\\n    visibility: visible;\\n    background-color: #000;\\n    align-items: start;\\n    margin-top: 1px;\\n    padding: 12px 0;\\n    padding-left: 15%;\\n    width: 100%;\\n    height: calc(100vh - 64px);\\n    position: absolute;\\n    left: 0;\\n    box-shadow: 0 3px 3px 0 rgb(0 0 0 / 20%);\\n    transform: translate3d(0, 0, 0);\\n    top: var(--feds-nav-height);\\n}\\n\";\n        const style = document.createElement('style');\n        style.textContent = css;\n        document.head.appendChild(style);\n      ", "import { MegaMenu } from \"./Parse\";\nimport { sanitize } from \"../../Utils/Utils\";\nimport './megaMenu.css';\n\nexport const renderGhostTabs = (title: string): HTML => {\n  const tab = (): { name: string; description: string } => ({\n    name: '',\n    description: '',\n  });\n  const tabs = [0, 1, 2, 3].map(tab);\n  return `\n  <div class=\"feds-popup loading\" aria-hidden=\"true\">\n    <div class=\"top-bar\">\n    </div>\n    <div class=\"title\">\n      <h2>${title}</h2>\n    </div>\n    <div class=\"tabs\" role=\"tablist\">\n      ${tabs.map(({ name, description }, i) => `\n        <div class=\"tab-wrapper\">\n          <button\n          role=\"tab\"\n          class=\"tab\"\n          aria-selected=\"false\"\n          aria-controls=\"${i}\"\n          >${name.trim() === '' ? '<div></div>' : name}</button>\n          ${description ? `<div class=\"feds-menu-description\">${description}</div>` : ''}\n        </div>\n      `).join('')}\n    </div>\n    <div class=\"tab-content\">\n    ${tabs.map((_, i) => `\n        <div\n          id=\"${i}\"\n          role=\"tabpanel\"\n          aria-labelledby=\"${i}\"\n          class=\"feds-navLink-content\"\n        >\n      <div class=\"feds-navLink-title\"></div>\n      <div class=\"feds-navLink-description\"></div>\n      </div>`).join('')}\n  </div>\n  `;\n}\n\n/* \n* We don't render columns immediately\n* So that we can deal with the ghost state\n* and so on.\n*/\n      \nexport const megaMenu = ({\n  title,\n  isSection\n}: MegaMenu): HTML => `\n  <button type=\"button\"\n          aria-expanded=\"false\"\n          aria-controls=\"${sanitize(title)}\"\n          class=\"mega-menu feds-link\"\n          popovertarget=\"${sanitize(title)}\"\n  >\n    ${title}\n  </button>\n  <div id=\"${sanitize(title)}\" popover class=\"feds-popup${isSection ? '' : ' section'}\" aria-hidden=\"true\">\n    <ul>\n    </ul>\n  </div>\n`\n", "import { IrrecoverableError, RecoverableError } from \"../../Error/Error\";\nimport { alternative, getNextSiblings, parseListAndAccumulateErrors } from \"../../Utils/Utils\";\nimport { MenuPromo, parseMenuPromo, parseSingleColumnSectionList, SingleColumnSectionList } from \"../Tab/Parse\";\nimport { Link, parseLink } from \"../Link/Parse\";\n\nexport type SmallMenu = {\n  type: \"SmallMenu\";\n  title: string;\n  columns: SingleColumnSectionList | List<List<Link>>;\n  promo: MenuPromo | null;\n};\n\ntype ColumnParser = (\n  _: Element\n) => Parsed<SingleColumnSectionList | List<List<Link>>, RecoverableError>;\n\nexport const parseSmallMenu = (\n  element: Element | null\n): Parsed<SmallMenu, RecoverableError> => {\n  const errors = [];\n  if (element === null)\n    throw new IrrecoverableError(ERRORS.elementNull);\n\n  const h2 = element.querySelector('h2')\n  const title = h2?.textContent ?? \"\";\n  if (title === \"\")\n    errors.push(new RecoverableError(ERRORS.noTitle))\n\n  const columnsContainer = ((): Element => {\n    if (h2 === null)\n      return element;\n    const container = document.createElement('div');\n    getNextSiblings(h2).forEach(s => container.appendChild(s));\n    return container;\n  })();\n  const [columns, es]\n    = alternative(parseSingleColumnSectionList as ColumnParser)\n    .or((el) => parseListAndAccumulateErrors(\n      [...el.children],\n      parseNoTitleColumn\n    )).eval(columnsContainer);\n  \n  const [promo, pes] = ((): Parsed<MenuPromo | null, RecoverableError> => {\n    try {\n      return parseMenuPromo(element);\n    } catch (_) {\n      return [null, []];\n    }\n  })();\n\n  return [\n    {\n      type: \"SmallMenu\",\n      title,\n      columns,\n      promo\n    },\n    [\n      ...es,\n      ...pes\n    ]\n  ];\n};\n\nconst parseNoTitleColumn = (\n  element: Element\n): Parsed<List<Link>, RecoverableError> => {\n  if (element.nodeName !== 'UL')\n    throw new Error('');\n  const links = [...element.querySelectorAll('ul > li > a')];\n  return parseListAndAccumulateErrors(links, parseLink);\n};\n\nconst ERRORS = {\n  elementNull: \"The element to be parsed is null\",\n  noTitle: \"Small menu has no title\",\n}\n", "\n        const css = \"/**\\n * Link Group Styles\\n */\\n.feds-link-group {\\n    --title-color: #2f2f2f;\\n    --sub-title-color: #4b4b4b;\\n    --bg-hover-color: #e9e9e9;\\n    --accent-color: #274dea;\\n    --accent-color-hover: #1d3ecf;\\n    --header-border-color: #b6b6b6;\\n    --header-background-color: #eaeaea;\\n    align-items: flex-start;\\n    display: flex;\\n    flex-direction: column;\\n    padding: 12px;\\n}\\n\\n.feds-link-group:hover {\\n    background-color: var(--bg-hover-color);\\n}\\n\\n.feds-link-group__title {\\n    /* font-family: var(--heading-font-family); */\\n    font-size: 0.875rem;\\n    font-weight: 700;\\n    line-height: 1rem;\\n    color: var(--title-color);\\n}\\n\\n.feds-link-group__subtitle {\\n    font-size: 0.75rem;\\n    line-height: 1rem;\\n    color: var(--sub-title-color);\\n}\\n\\n.feds-link-group--blue,\\n.feds-link-group--blue .feds-link-group__title {\\n    color: var(--accent-color);\\n}\\n\\n.feds-link-group--blue:hover,\\n.feds-link-group--blue:hover .feds-link-group__title {\\n    color: var(--accent-color-hover);\\n}\\n\\n/* styles overriden coming from styles.css */\\n.feds-link-group.feds-link-group--blue {\\n    text-decoration: underline;\\n}\\n\\n.feds-link-group.feds-link-group--gray-gradient {\\n    background-color: var(--header-background-color);\\n}\\n\\n@media (min-width: 900px) {\\n    .feds-link-group {\\n        --title-color: #9f9f9f;\\n        --sub-title-color: #9f9f9f;\\n        --title-color-hover: #fff;\\n        --sub-title-color-hover: #fff;\\n        --bg-hover-color: transparent;\\n        --header-background-color: transparent;\\n        padding: 0;\\n    }\\n\\n    .feds-link-group--blue,\\n    .feds-link-group--blue:hover {\\n        color: var(--title-color-hover);\\n    }\\n\\n    .feds-link-group__content {\\n        padding: 24px 0;\\n    }\\n\\n    .feds-link-group__title {\\n        font-size: 1.25rem;\\n        line-height: 115%;\\n        padding-bottom: 10px;\\n    }\\n\\n    .feds-link-group:hover .feds-link-group__title {\\n        color: var(--title-color-hover);\\n    }\\n\\n    .feds-link-group__subtitle {\\n        font-size: 0.875rem;\\n        line-height: 140%;\\n    }\\n\\n    .feds-link-group:hover .feds-link-group__subtitle {\\n        color: var(--sub-title-color-hover);\\n    }\\n\\n    .feds-link-group--blue .feds-link-group__title,\\n    .feds-link-group.feds-link-group--gray-gradient .feds-link-group__title{\\n        color: var(--title-color-hover);\\n    }\\n\\n    .feds-link-group.feds-link-group--header .feds-link-group__title {\\n        color: var(--title-color);\\n        border-bottom: 1px solid var(--header-border-color);\\n    }\\n\\n    .feds-link-group.feds-link-group--header .feds-link-group__content {\\n        width: 100%;\\n    }\\n}\\n\";\n        const style = document.createElement('style');\n        style.textContent = css;\n        document.head.appendChild(style);\n      ", "import { LinkGroup, LinkGroupBlue, LinkGroupHeader, LinkGroupLink } from \"./Parse\";\n\n// css\nimport \"./linkGroup.css\";\n\nexport const linkGroup = (lg: LinkGroup): HTML => {\n  switch (lg.type) {\n    case \"LinkGroupHeader\": return linkGroupHeader(lg);\n    case \"LinkGroupLink\": return linkGroupLink(lg);\n    case \"LinkGroupBlue\": return linkGroupBlue(lg);\n    default: {\n      const exhaustivenessCheck: never = lg;\n      console.error(exhaustivenessCheck);\n      return \"\";\n    }\n  }\n};\n\nconst linkGroupHeader = ({\n  title,\n  classes\n}: LinkGroupHeader): HTML => {\n  const classNames = classes.slice(1).map(cls => `feds-link-group--${cls}`).join(' ');\n  return `\n    <div role=\"heading\" class=\"feds-link-group ${classNames}\">\n      <div class=\"feds-link-group__content\">\n        <div class=\"feds-link-group__title\">${title}</div>\n      </div>\n    </div>\n  `;\n};\n\nconst linkGroupLink = ({\n  iconHref,\n  iconAlt,\n  title,\n  href,\n  subtitle\n}: LinkGroupLink): HTML => {\n  const hasIcon = iconAlt !== null && iconHref !== null;\n  const icon = !hasIcon\n    ? \"\"\n    : `\n      <picture class=\"feds-link-group__icon\">\n        <img\n          loading=\"lazy\"\n          src=\"${iconHref}\"\n          alt=\"${iconAlt}\"\n          class=\"feds-link-group__icon-img\"\n        >\n      </picture>\n    `;\n  return `\n    <a class=\"feds-link-group\" href=\"${href}\" daa-ll=\"${title}\">\n      ${icon}\n      <div class=\"feds-link-group__content\">\n        <div class=\"feds-link-group__title\">${title}</div>\n        <div class=\"feds-link-group__subtitle\">${subtitle}</div>\n      </div>\n    </a>\n  `\n}\n\nconst linkGroupBlue = ({\n  link\n}: LinkGroupBlue): HTML => `\n  <a href=\"${link.href}\" class=\"feds-link-group feds-link-group--blue\" daa-ll=\"${link.text}\">\n    <div class=\"feds-link-group__content\">\n        <div class=\"feds-link-group__title\">${link.text}</div>\n      </div>\n  </a>\n`;", "import { ColumnItem, MenuPromo, Tab } from \"./Parse\";\nimport { linkGroup } from \"../LinkGroup/Render\";\nimport { link } from \"../Link/Render\";\nimport { primaryCTA, secondaryCTA } from \"../CTA/Render\";\nimport { renderListItems } from \"../../Utils/Utils\";\n\nexport const tabs = (\n  brand: HTML,\n  title: string,\n  breadcrumbs: HTML,\n  fedsPopupId: string,\n  isLocalNav: boolean\n) => (\n  ts: List<Tab>,\n): HTML => `\n  <div class=\"top-bar\">\n    ${isLocalNav ? brand : '' /* TODO placeholders */}\n  </div>\n  <div class=\"title\">\n    ${breadcrumbs || '<div class=\"breadcrumbs\"></div>'}\n    <h2 id=\"${fedsPopupId}-title\">${title}</h2>\n  </div>\n  <div class=\"tabs\" role=\"tablist\">\n    ${ts.map((t, i) => `\n      <button\n        role=\"tab\"\n        class=\"tab\"\n        aria-selected=\"false\"\n        aria-controls=\"${i}\"\n      >\n        ${t.title === '' ? '<div></div>' : t.title}\n      </button>\n    `).join('')}\n  </div>\n  <div class=\"tab-content\">\n    ${ts.map((t, i) => {\n      return `\n      <div\n        id=\"${i}\"\n        role=\"tabpanel\"\n        class=\"${Array.isArray(t.columns) &&\n          t.columns\n           .flat()\n           .some(item => item.type === \"LinkGroupHeader\")\n          ? \"has-subheader\"\n          : \"\"\n        }\"\n        hidden\n      >\n        <ul>\n        ${Array.isArray(t.columns)\n          ? renderListItems(t.columns, links => `\n                              <ul>\n                                ${renderListItems(\n                                  links.filter(l => \n                                      l.type !== 'PrimaryCTA'),\n                                  columnItem\n                                )}\n                              </ul>\n                            `)\n          : t.columns.content}\n        </ul>\n        <div class=\"sticky-cta\">\n          ${t.CTA ? columnItem(t.CTA) : ''}\n        </div>\n      </div>\n    `.trim();\n    }).join('')\n  }\n  </div>\n`.trim();\n\nexport const menuPromo = ({\n  content\n}: MenuPromo): HTML => content\n\nexport const columnItem = (\n  item: ColumnItem\n): HTML => {\n  switch (item.type) {\n    case \"LinkGroupHeader\":\n    case \"LinkGroupLink\":\n    case \"LinkGroupBlue\":\n      return linkGroup(item);\n    case \"Link\":\n      return link(item);\n    case \"PrimaryCTA\":\n      return primaryCTA(item);\n    case \"SecondaryCTA\":\n      return secondaryCTA(item);\n    default: {\n      item satisfies never;\n      return \"\";\n    }\n  }\n}\n", "import { renderListItems, sanitize } from \"../../Utils/Utils\";\nimport { SingleColumnSectionList } from \"../Tab/Parse\";\nimport { columnItem, menuPromo } from \"../Tab/Render\";\nimport { Link } from \"../Link/Parse\";\nimport { link } from \"../Link/Render\";\nimport { SmallMenu } from \"./Parse\";\n\nexport const smallMenu = ({\n  title,\n  columns,\n  promo\n}: SmallMenu): HTML => `\n  <button type=\"button\"\n          aria-expanded=\"false\"\n          aria-controls=\"${sanitize(title)}\"\n  >\n    ${title}\n  </button>\n  <div class=\"feds-popup\" id=\"${sanitize(title)}\">\n    ${smallMenuList(columns)}\n    ${promo === null ? '' : `<li>${menuPromo(promo)}</li>`}\n  </div>\n`;\n\nconst smallMenuList = (\n  c: SingleColumnSectionList | List<List<Link>>\n): HTML => {\n  if (!Array.isArray(c) && c?.type === \"SingleColumnSectionList\")\n    return column(c);\n  return `\n  <ul>\n    ${renderListItems(c as List<List<Link>>, (l) => `\n      <ul>\n        ${renderListItems(l, link)}\n      </ul>\n    `)}\n  </ul>\n  `;\n}\n\nconst column = (\n  c: SingleColumnSectionList\n): HTML => `\n  <ul>\n    ${renderListItems(c.sections, (section): string => `\n      <ul>\n        ${section.title === null\n          ? ''\n          : `<span class=\"column-section-title\">${section.title}</span>`\n        }\n        ${renderListItems(section.items, columnItem)}\n      </ul>\n    `.trim())}\n  </ul>\n`.trim();\n", "import { RecoverableError } from \"../../Error/Error\";\n\nexport type Text = {\n  type: \"Text\";\n  content: string;\n};\n\nconst ERRORS = {\n  elementNull: \"Error when parsing text. Element is null\",\n  textContentNull: \"Error when parsing text. Element has no textContent\",\n}\n\nexport const parseText = (\n  element: Element | null\n): Parsed<Text, RecoverableError> => {\n  if (element === null)\n    return [\n      {\n        type: \"Text\" ,\n        content: \"\"\n      },\n      [new RecoverableError(ERRORS.elementNull, \"Minor\")]\n    ];      \n  const content = element.textContent;\n  if (content === null)\n    return [\n      {\n        type: \"Text\",\n        content: \"\",\n      },\n      [new RecoverableError(ERRORS.textContentNull, \"Minor\")]\n    ];\n  return [\n    {\n      type: \"Text\",\n      content,\n    },\n    []\n  ]\n};\n\n", "import { Text } from \"./Parse\";\n\nexport const text = ({ content }: Text): HTML => content;\n", "import { IrrecoverableError, RecoverableError } from \"../Error/Error\";\nimport { Brand, parseBrand } from \"./Brand/Parse\";\nimport { brand } from \"./Brand/Render\";\nimport { parsePrimaryCTA, parseSecondaryCTA, PrimaryCTA, SecondaryCTA } from \"./CTA/Parse\";\nimport { primaryCTA, secondaryCTA } from \"./CTA/Render\";\nimport { Link, parseLink } from \"./Link/Parse\";\nimport { link } from \"./Link/Render\";\nimport { MegaMenu, parseMegaMenu } from \"./MegaMenu/Parse\";\nimport { megaMenu } from \"./MegaMenu/Render\";\nimport { parseSmallMenu, SmallMenu } from \"./SmallMenu/Parse\";\nimport { smallMenu } from \"./SmallMenu/Render\";\nimport { parseText, Text } from \"./Text/Parse\";\nimport { text } from \"./Text/Render\";\n\nexport type Component\n  = Text\n  | Link\n  | SecondaryCTA\n  | PrimaryCTA\n  | Brand\n  | SmallMenu\n  | MegaMenu;\n\nexport const parseComponent = (\n  element: Element\n): Parsed<Component, RecoverableError> => {\n  if (element === null)\n    throw new IrrecoverableError(ERRORS.elementNull);\n\n  const brandElem = element.querySelector('.gnav-brand');\n  if (brandElem !== null) \n    return parseBrand(element)\n\n  const largeMenu = element.querySelector('.large-menu');\n  if (largeMenu !== null)\n    return parseMegaMenu(largeMenu);\n\n  if (element.querySelector('h5, ul, link-group') !== null)\n    return parseSmallMenu(element);\n\n  if (element.querySelector('strong') !== null)\n    return parsePrimaryCTA(element);\n  \n  if (element.querySelector('em') !== null)\n    return parseSecondaryCTA(element);\n\n  if (element.querySelector('a') === null)\n    return parseText(element);\n\n  return parseLink(element.querySelector('a'));\n};\n\nexport const component = (\n  c: Component\n): HTML => {\n  switch (c.type) {\n    case \"Text\": return text(c);\n    case \"Link\": return link(c);\n    case \"SecondaryCTA\": return secondaryCTA(c);\n    case \"PrimaryCTA\": return primaryCTA(c);\n    case \"Brand\": return brand(c);\n    case \"SmallMenu\": return smallMenu(c);\n    case \"MegaMenu\": return megaMenu(c);\n    default: {\n      const exhaustive : never = c;\n      console.error(`Failed to recognize component: ${exhaustive}`);\n      return '';\n    }\n  }\n};\n\nconst ERRORS = {\n  elementNull: \"Element is null\",\n};\n\n", "import { Component, parseComponent } from \"../Components/Component\";\nimport { parseProductEntryCTA, ProductEntryCTA } from \"../Components/CTA/Parse\";\nimport { Link, parseLink } from \"../Components/Link/Parse\";\nimport { IrrecoverableError, RecoverableError } from \"../Error/Error\";\nimport { parseListAndAccumulateErrors } from \"../Utils/Utils\";\n\nexport type GlobalNavigationData = {\n  breadcrumbs: List<Link>;\n  components: List<Component>;\n  productCTA: ProductEntryCTA | null;\n  localnav: boolean;\n  errors: List<RecoverableError>;\n  unavEnabled: boolean;\n};\n\nexport const parseNavigation = (\n  mainNav: HTMLElement,\n  unavEnabled: boolean\n): GlobalNavigationData | IrrecoverableError => {\n  const [breadcrumbs, breadcrumbErrors]\n    = parseListAndAccumulateErrors(\n      [...document.querySelectorAll('.breadcrumbs ul > li > a') ?? []],\n      parseLink\n    );\n  const [components, componentErrors] \n    = parseListAndAccumulateErrors(\n      [...mainNav.children],\n      parseComponent\n    ); \n  const productEntryElement = mainNav.querySelector('.product-entry-cta');\n  const [productCTA, productCtaErrors]\n    = (\n  (): Parsed<ProductEntryCTA | null, RecoverableError> => {\n    try {\n      return parseProductEntryCTA(productEntryElement);\n    } catch (_) {\n      return [null, []];\n    }\n  })();\n  const localnav = components\n    .filter((component): boolean =>\n            component.type === \"MegaMenu\" &&\n            component.isSection).length === 1;\n  const errors = [\n    breadcrumbErrors,\n    componentErrors,\n    productCtaErrors,\n  ].flat();\n\n  return {\n    breadcrumbs,\n    components,\n    productCTA,\n    localnav,\n    errors,\n    unavEnabled,\n  }\n};\n", "import { setupMobileDesktopListeners, zip } from \"../Utils/Utils\";\n\ntype CleanupFunction = () => void\n\nconst mobileClickListeners = (\n  gnav: HTMLElement\n): CleanupFunction => {\n  const tabButtons = [...gnav.querySelectorAll('.tabs > button[role=\"tab\"]')];\n  const tabPanels = [...gnav.querySelectorAll('.tab-content > div')];\n  const tabButtonClickCallbacks = tabButtons.map((button, i) => (): void => {\n      tabButtons.forEach(tabButton => {\n        tabButton.setAttribute('aria-selected', 'false');\n      });\n      tabPanels.forEach(tabPanel => {\n        tabPanel.setAttribute('hidden', 'true');\n      });\n      tabPanels[i]?.removeAttribute('hidden');\n      button.setAttribute('aria-selected', 'true');\n    }\n  );\n  tabButtons.forEach((button, i) => {\n    button.addEventListener('click', tabButtonClickCallbacks[i]);\n  });\n  return () => {\n    tabButtons.forEach((button, i) => {\n      button.removeEventListener('click', tabButtonClickCallbacks[i]);\n    });\n  };\n};\n\nconst desktopClickListeners = (\n  gnav: HTMLElement\n): CleanupFunction => {\n  return () => console.log(gnav);\n};\n\nexport const initClickListeners = mobileClickListeners\n\n", "import { setupMobileDesktopListeners } from \"../Utils/Utils\";\n\ntype CleanupFunction = () => void\n\nconst initDesktopKeyboardNav = (\n  gnav: HTMLElement\n): CleanupFunction => {\n  return () => console.log(gnav);\n};\n\nconst initMobileKeyboardNav = (\n  gnav: HTMLElement\n): CleanupFunction => {\n  return () => console.log(gnav);\n};\n\nexport const initKeyboardNav =  setupMobileDesktopListeners({\n  mobileEventListeners: initMobileKeyboardNav,\n  desktopEventListeners: initDesktopKeyboardNav,\n});\n", "/**\n * Utility functions for Universal Navigation (UNAV)\n * Contains pure functions and state management for UNAV functionality\n */\n\nimport type {\n  UserProfile,\n  UnavConfig,\n  AlloyIdentityData,\n  WindowWithAlloy,\n} from './Unav.types';\n\n// ============================================================================\n// Constants\n// ============================================================================\n\n/**\n * Components visible to signed-out users\n */\nexport const SIGNED_OUT_ICONS = ['appswitcher', 'help'];\n\n/**\n * Language to country code mapping for locale normalization\n */\nexport const LANGMAP = {\n  cs: ['cz'],\n  da: ['dk'],\n  de: ['at'],\n  en: ['africa', 'au', 'ca', 'ie', 'in', 'mt', 'ng', 'nz', 'sg', 'za'],\n  es: ['ar', 'cl', 'co', 'cr', 'ec', 'gt', 'la', 'mx', 'pe', 'pr'],\n  et: ['ee'],\n  ja: ['jp'],\n  ko: ['kr'],\n  nb: ['no'],\n  pt: ['br'],\n  sl: ['si'],\n  sv: ['se'],\n  uk: ['ua'],\n  zh: ['cn', 'tw'],\n};\n\n// ============================================================================\n// Profile State Management\n// ============================================================================\n\n/**\n * Profile state management using closure pattern\n * Provides async access to user profile with 5-second timeout fallback\n * @returns Tuple of [setter, getter] functions\n */\nexport const [setUserProfile, getUserProfile] = (() => {\n  let profileData: UserProfile | undefined;\n  let profileResolve: ((value: UserProfile) => void) | undefined;\n  let profileTimeout: ReturnType<typeof setTimeout> | undefined;\n\n  const profilePromise = new Promise<UserProfile>((resolve) => {\n    profileResolve = resolve;\n\n    profileTimeout = setTimeout(() => {\n      profileData = {};\n      resolve(profileData);\n    }, 5000);\n  });\n\n  return [\n    (data: UserProfile): void => {\n      if (data && !profileData) {\n        profileData = data;\n        clearTimeout(profileTimeout);\n        profileResolve?.(profileData);\n      }\n    },\n    (): Promise<UserProfile> => profilePromise,\n  ];\n})();\n\n// ============================================================================\n// Width Calculation\n// ============================================================================\n\n/**\n * Calculates minimum width CSS value for UNAV container\n * Prevents layout shift during initialization by pre-calculating required space\n * \n * @param unavComponents - Array of component names to display\n * @param signedOut - Whether user is signed out (affects button display)\n * @returns CSS calc() string for min-width property\n */\nexport function getUnavWidthCSS(\n  unavComponents: string[],\n  signedOut: boolean = false\n): string {\n  const iconWidth = 32; // px\n  const flexGap = 0.25; // rem\n  const sectionDivider = false; // hardcoded for now\n  const sectionDividerMargin = 4; // px (left and right margins)\n  const cartEnabled = /uc_carts=/.test(document.cookie);\n  \n  // Filter out cart if not enabled via cookie\n  const components = (!cartEnabled \n    ? unavComponents?.filter((x) => x !== 'cart') \n    : unavComponents) ?? [];\n  const n = components.length ?? 3;\n\n  if (signedOut) {\n    // Calculate width for signed-out state (fewer icons + sign-in button)\n    const l = components.filter((c: string) => SIGNED_OUT_ICONS.includes(c)).length;\n    const signInButton = 92; // px\n    return `calc(${signInButton}px + ${l * iconWidth}px + ${l * flexGap}rem${\n      sectionDivider ? ` + 2px + ${2 * sectionDividerMargin}px + ${flexGap}rem` : ''\n    })`;\n  }\n\n  // Calculate width for signed-in state (all icons)\n  return `calc(${n * iconWidth}px + ${(n - 1) * flexGap}rem${\n    sectionDivider ? ` + 2px + ${2 * sectionDividerMargin}px + ${flexGap}rem` : ''\n  })`;\n}\n\n// ============================================================================\n// Locale Handling\n// ============================================================================\n\n/**\n * Normalizes locale prefix to Universal Nav format (lang_COUNTRY)\n * Handles special cases and country-to-language mappings\n * \n * @param locale - Locale object with prefix property\n * @returns Normalized locale string (e.g., 'en_US', 'fr_FR')\n */\nexport const getUniversalNavLocale = (locale: { prefix: string }): string => {\n  if (!locale.prefix || locale.prefix === '/') return 'en_US';\n  \n  const prefix = locale.prefix.replace('/', '');\n  \n  // Handle already formatted locales (e.g., 'en_us' or 'en_US')\n  if (prefix.includes('_')) {\n    const [lang, country] = prefix.split('_').reverse();\n    return `${lang.toLowerCase()}_${country.toUpperCase()}`;\n  }\n\n  // Special case: UK should map to en_GB\n  if (prefix === 'uk') return 'en_GB';\n\n  // Check if country code needs language mapping (e.g., 'dk' -> 'da_DK')\n  const customLang = (Object.keys(LANGMAP) as Array<keyof typeof LANGMAP>).find(\n    (key) => LANGMAP[key].includes(prefix as never)\n  );\n  if (customLang) return `${customLang.toLowerCase()}_${prefix.toUpperCase()}`;\n\n  // Default: use prefix as both language and country (e.g., 'fr' -> 'fr_FR')\n  return `${prefix.toLowerCase()}_${prefix.toUpperCase()}`;\n};\n\n// ============================================================================\n// Device Detection\n// ============================================================================\n\n/**\n * OS detection mapping for user agent strings\n */\nconst OS_MAP = {\n  Mac: 'macOS',\n  Win: 'windows',\n  Linux: 'linux',\n  CrOS: 'chromeOS',\n  Android: 'android',\n  iPad: 'iPadOS',\n  iPhone: 'iOS',\n};\n\n/**\n * Detects device OS from user agent string\n * @returns OS identifier for analytics context\n */\nexport const getDevice = (): UnavConfig['analyticsContext']['consumer']['device'] => {\n  const agent = navigator.userAgent;\n  for (const [os, osName] of Object.entries(OS_MAP)) {\n    if (agent.includes(os)) {\n      return osName as UnavConfig['analyticsContext']['consumer']['device'];\n    }\n  }\n  return 'linux';\n};\n\n// ============================================================================\n// Analytics Integration\n// ============================================================================\n\n/**\n * Retrieves visitor GUID from Adobe Alloy SDK\n * Used for analytics tracking and user identification\n * \n * @returns Promise resolving to ECID or undefined if unavailable\n */\nexport const getVisitorGuid = async (): Promise<string | undefined> => {\n  const windowWithAlloy = window as WindowWithAlloy;\n  return windowWithAlloy.alloy\n    ? await windowWithAlloy.alloy('getIdentity')\n        .then((data: AlloyIdentityData) => data?.identity?.ECID)\n        .catch(() => undefined)\n    : undefined;\n};\n", "/**\n * Component configuration factory for Universal Navigation (UNAV)\n * Defines the structure and behavior of UNAV components\n */\n\nimport type {\n  UnavComponents,\n  AccountMenuEventDetail,\n  UserProfile,\n  HelpItem,\n} from './Unav.types';\nimport { setUserProfile } from './Unav.utils';\nimport { getMiloConfig, getMetadata } from '../../Utils/Utils';\n\n// ============================================================================\n// Helper functions\n// ============================================================================\n\n/**\n * Context identifier for Adobe IMS sign-in\n * Retrieved from MiloConfig if provided, otherwise empty object\n */\nconst getSignInContext = (): object => {\n  try {\n    const config = getMiloConfig();\n    return config.signInContext || {};\n  } catch {\n    return {};\n  }\n};\n\n/**\n * Determines the sign-in CTA button style (primary or secondary)\n * Checks metadata tag first, then falls back to config\n * @returns 'primary' or 'secondary' button style\n */\nconst getSignInCtaStyle = () => {\n  const config = getMiloConfig();\n  const isPrimary = (\n    getMetadata('signin-cta-style') === 'primary'\n    || config?.unav?.profile?.signInCtaStyle === 'primary'\n  );\n  return isPrimary ? 'primary' : 'secondary';\n};\n\n/**\n * Returns message event listener for profile component\n * Uses custom listener from config if provided, otherwise returns default listener\n * \n * Default listener handles:\n * - AppInitiated: Fetches and sets user profile data\n * - SignOut: Executes default sign-out action\n * - ProfileSwitch: Reloads page after profile switch\n * \n * @returns Event listener function for CustomEvent<AccountMenuEventDetail>\n */\nconst getMessageEventListener = () => {\n  const config = getMiloConfig();\n  const configListener = config?.unav?.profile?.messageEventListener;\n  if (configListener) return configListener;\n\n  return (event: CustomEvent<AccountMenuEventDetail>) => {\n    const { name, payload, executeDefaultAction } = event.detail;\n    if (!name || name !== 'System' || !payload || typeof executeDefaultAction !== 'function') return;\n    switch (payload.subType) {\n      case 'AppInitiated':\n        window.adobeProfile?.getUserProfile()\n          .then((data) => { setUserProfile(data as UserProfile); })\n          .catch(() => { setUserProfile({}); });\n        break;\n      case 'SignOut':\n        executeDefaultAction();\n        break;\n      case 'ProfileSwitch':\n        Promise.resolve(executeDefaultAction()).then((profile) => {\n          if (profile) window.location.reload();\n        });\n        break;\n      default:\n        break;\n    }\n  };\n};\n\n/**\n * Returns help component children from config or default fallback\n * @returns Array of help items (Support and Community by default)\n */\nfunction getHelpChildren(): HelpItem[] {\n  const { unav } = getMiloConfig();\n  return unav?.unavHelpChildren || ([\n    { type: 'Support' },\n    { type: 'Community' },\n  ] as HelpItem[]);\n}\n\n// ============================================================================\n// Component Configuration\n// ============================================================================\n\n/**\n * Factory function that returns UNAV component configurations\n * Each component is configured with its attributes and behaviors\n * \n * @returns Object mapping component names to their configurations\n */\nexport const getUnavComponents = (): UnavComponents => {\n  const config = getMiloConfig();\n  return {\n    profile: {\n      name: 'profile',\n      attributes: {\n        accountMenuContext: {\n          sharedContextConfig: {\n            enableLocalSection: true,\n            enableProfileSwitcher: true,\n            miniAppContext: {\n              logger: {\n                trace: () => {},\n                debug: () => {},\n                info: () => {},\n                // TODO: Integrate with lanaLog for proper logging\n                // warn: (e) => lanaLog({ message: 'Profile Menu warning', e, tags: 'universalnav,warn' }),\n                // error: (e) => lanaLog({ message: 'Profile Menu error', e, tags: 'universalnav', errorType: 'e' }),\n                warn: () => {},\n                error: () => {},\n              },\n            },\n            complexConfig: config?.unav?.profile?.complexConfig || null,\n            ...config?.unav?.profile?.config,\n          },\n          messageEventListener: getMessageEventListener(),\n        },\n        // UNav 1.5: Support for primary/secondary signIn CTA style\n        // Setting signInCtaStyle = 'primary' makes signIn CTA primary and signUp secondary\n        signInCtaStyle: getSignInCtaStyle(),\n        isSignUpRequired: false,\n        callbacks: {\n          onSignIn: () => {\n            window.adobeIMS?.signIn(getSignInContext());\n          },\n          onSignUp: () => {\n            window.adobeIMS?.signIn(getSignInContext());\n          },\n        },\n      },\n    },\n\n    appswitcher: {\n      name: 'app-switcher',\n    },\n\n    notifications: {\n      name: 'notifications',\n      attributes: {\n        notificationsConfig: {\n          applicationContext: {\n            appID: config?.unav?.uncAppId || 'adobecom',\n            ...config?.unav?.uncConfig,\n          },\n        },\n      },\n    },\n\n    help: {\n      name: 'help',\n      attributes: {\n        children: getHelpChildren(),\n      },\n    },\n\n    jarvis: {\n      name: 'jarvis',\n      attributes: {\n        appid: config?.jarvis?.id,\n        callbacks: config?.jarvis?.callbacks,\n      },\n    },\n\n    cart: {\n      name: 'cart',\n    },\n  };\n};\n", "/**\n * UNAV Loader - Initialization and lifecycle management\n * Orchestrates the loading, configuration, and initialization of Universal Navigation\n */\n\nimport { RecoverableError } from '../../Error/Error';\nimport { loadScript, loadStyles, isDesktop, getMiloConfig, MiloConfig } from '../../Utils/Utils';\nimport type {\n  UnavConfig,\n  UnavChildren,\n  WindowWithAdobeId,\n} from './Unav.types';\nimport {\n  getUnavWidthCSS,\n  getVisitorGuid,\n  getDevice,\n  getUniversalNavLocale,\n} from './Unav.utils';\nimport { getUnavComponents } from './Unav.config';\n\n// ============================================================================\n// Types\n// ============================================================================\n\n/**\n * Return type for successful UNAV initialization\n */\nexport type Unav = {\n  reloadUnav: (_?: UnavConfig) => void;\n  errors: Set<RecoverableError>;\n};\n\n// ============================================================================\n// Helper Functions\n// ============================================================================\n\n/**\n * Sets the isSignUpRequired flag on the profile component\n * @param children - Array of UNAV components with profile as first element\n * @param value - Boolean value to set for isSignUpRequired\n */\nconst setProfileSignUpRequired = (children: UnavChildren, value: boolean): void => {\n  if (\n    children[0] &&\n    'attributes' in children[0] &&\n    children[0].attributes &&\n    typeof children[0].attributes === 'object' &&\n    'isSignUpRequired' in children[0].attributes\n  ) {\n    (children[0].attributes as { isSignUpRequired: boolean }).isSignUpRequired = value;\n  }\n};\n\n// ============================================================================\n// UNAV Loader\n// ============================================================================\n\n/**\n * Loads and initializes Universal Navigation\n * \n * This is the main orchestration function that:\n * 1. Validates the container element exists\n * 2. Parses configuration from meta tags\n * 3. Loads external UNAV assets from CDN\n * 4. Builds component configuration\n * 5. Initializes UNAV with proper context\n * 6. Sets up responsive listeners\n * \n * @param nav - Navigation element containing .feds-utilities container\n * @param _config - Optional partial configuration override (not currently used)\n * @returns Promise resolving to Unav object or RecoverableError\n */\nexport const loadUnav = async (\n  nav: HTMLElement,\n  _config?: Partial<UnavConfig>\n): Promise<Unav | RecoverableError> => {\n  try {\n    // ========================================================================\n    // Step 1: Validate container exists\n    // ========================================================================\n    const utilitiesContainer = nav.querySelector('.feds-utilities');\n    if (!(utilitiesContainer instanceof HTMLElement)) {\n      return new RecoverableError('missing \".feds-utilities\" container');\n    }\n\n    const errors = new Set<RecoverableError>();\n\n    // ========================================================================\n    // Step 2: Parse meta tag configuration\n    // ========================================================================\n    const meta = document.head.querySelector('meta[name=\"universal-nav\"]');\n    const rawValue = meta instanceof HTMLMetaElement ? meta.content ?? '' : '';\n\n    if (!(meta instanceof HTMLMetaElement)) {\n      errors.add(new RecoverableError('metadata \"universal-nav\" is missing'));\n    }\n\n    const trimmedValue = rawValue.trim();\n    if (meta instanceof HTMLMetaElement && trimmedValue.length === 0) {\n      errors.add(new RecoverableError('metadata \"universal-nav\" has no value'));\n    }\n\n    // ========================================================================\n    // Step 3: Check user authentication state\n    // ========================================================================\n    const signedOut = !window.adobeIMS?.isSignedInUser();\n\n    // Parse component list from meta tag\n    const unavComponents = trimmedValue\n      .split(',')\n      .map((option) => option.trim())\n      .filter(\n        (component) =>\n          Object.keys(getUnavComponents()).includes(component) ||\n          component === 'signup'\n      );\n\n    // Pre-calculate width for signed-out state to prevent layout shift\n    if (signedOut) {\n      const width = getUnavWidthCSS(unavComponents, signedOut);\n      utilitiesContainer.style.setProperty('min-width', width);\n    }\n\n    // ========================================================================\n    // Step 4: Gather analytics and environment data\n    // ========================================================================\n    \n    // Get configuration with error handling\n    let config: MiloConfig;\n    try {\n      config = getMiloConfig();\n    } catch (error) {\n      throw new Error('MiloConfig not available for UNAV initialization');\n    }\n\n    const locale = getUniversalNavLocale(config.locale);\n    const environment = config.env.name === 'prod' ? 'prod' : 'stage';\n\n    // Fetch visitor GUID for analytics\n    const visitorGuid = await getVisitorGuid();\n\n    // ========================================================================\n    // Step 5: Load UNAV assets from CDN\n    // ========================================================================\n    \n    // Get version from URL parameter or use default\n    let unavVersion: string | null = new URLSearchParams(\n      window.location.search\n    ).get('unavVersion');\n\n    // Validate version format (e.g., '1.5' or '2')\n    if (!/^\\d+(\\.\\d+)?$/.test(unavVersion ?? '')) {\n      unavVersion = '1.5';\n    }\n\n    // Load JS and CSS in parallel\n    await Promise.all([\n      loadScript(\n        `https://${environment}.adobeccstatic.com/unav/${unavVersion}/UniversalNav.js`\n      ),\n      loadStyles(\n        `https://${environment}.adobeccstatic.com/unav/${unavVersion}/UniversalNav.css`,\n        true\n      ),\n    ]);\n\n    // ========================================================================\n    // Step 6: Build component children array\n    // ========================================================================\n    \n    /**\n     * Dynamically assembles child components based on meta tag configuration\n     * Special handling for 'profile' (always first) and 'signup' (modifies profile)\n     */\n    const getChildren = (): UnavChildren => {\n      const unavComponentsConfig = getUnavComponents();\n      const children: UnavChildren = [unavComponentsConfig.profile];\n\n      // Reset isSignUpRequired flag\n      setProfileSignUpRequired(children, false);\n\n      // Process each component from meta tag\n      unavComponents?.forEach((component: string) => {\n        if (component === 'profile') return; // Already added\n\n        if (component === 'signup') {\n          // 'signup' modifies profile component instead of adding new one\n          setProfileSignUpRequired(children, true);\n          return;\n        }\n\n        // Add component if it exists in configuration\n        const unavComponent = unavComponentsConfig[component];\n        if (unavComponent) {\n          children.push(unavComponent);\n        }\n      });\n\n      return children;\n    };\n\n    // ========================================================================\n    // Step 7: Build UNAV configuration object\n    // ========================================================================\n    \n    const getConfiguration = (): UnavConfig => ({\n      target: utilitiesContainer,\n      env: environment,\n      locale,\n      countryCode: 'US', // TODO: Dynamically determine country code (getMiloLocaleSettings(getConfig().locale)?.country)\n      imsClientId: (window as WindowWithAdobeId)?.adobeid?.client_id,\n      theme: 'light', // TODO: Add toggle based on site theme\n      analyticsContext: {\n        consumer: {\n          name: 'adobecom',\n          version: '1.0',\n          platform: 'Web',\n          device: getDevice(),\n          os_version: navigator.platform,\n        },\n        event: { visitor_guid: visitorGuid },\n      },\n      children: getChildren(),\n      isSectionDividerRequired: !!config?.unav?.showSectionDivider,\n      showTrayExperience: !isDesktop.matches,\n    });\n\n    // ========================================================================\n    // Step 8: Initialize UNAV\n    // ========================================================================\n    \n    await window?.UniversalNav?.(getConfiguration());\n\n    // Remove min-width constraint for signed-in users (allow natural sizing)\n    if (!signedOut) {\n      utilitiesContainer?.style.removeProperty('min-width');\n    }\n\n    // ========================================================================\n    // Step 9: Setup responsive listeners\n    // ========================================================================\n\n    // Store reload function for responsive changes\n    const reloadUnav = (_?: UnavConfig): void => {\n      window?.UniversalNav?.reload(\n        getConfiguration()\n      );\n    };\n    \n    // Reinitialize UNAV when viewport changes (desktop/mobile switch)\n    isDesktop.addEventListener('change', () => {\n      reloadUnav();\n    });\n\n    // ========================================================================\n    // Return success with accumulated errors\n    // ========================================================================\n    \n    return {\n      reloadUnav,\n      errors,\n    };\n  } catch (error) {\n    // Catch any unexpected errors and return as RecoverableError\n    const message =\n      error instanceof Error ? error.message : 'failed to load universal nav';\n    return new RecoverableError(message);\n  }\n};\n", "import { IrrecoverableError } from \"../Error/Error\";\nimport { Input } from \"../Main\";\nimport { fetchAndProcessPlainHTML } from \"../Utils/Utils\";\n\ntype Initial = {\n  mainNav: HTMLElement;\n  aside: HTMLElement | IrrecoverableError;\n};\n\nexport const getInitialHTML = async ({\n  gnavSource,\n  asideSource\n}: Input): Promise<Initial | IrrecoverableError> => {\n  const mainNav = await fetchAndProcessPlainHTML(gnavSource);\n  if (mainNav instanceof IrrecoverableError)\n    return mainNav;\n  const aside = await fetchAndProcessPlainHTML(asideSource);\n  return {\n    mainNav,\n    aside,\n  }\n}\n\n", "\n        const css = \"/**\\n * Global Navigation Styles\\n * Styles for the federal global navigation component\\n */\\n\\n:root {\\n    --feds-heading-font: 'Adobe Clean Display', adobe-clean-display, adobe-clean, 'Trebuchet MS', sans-serif;\\n    --feds-link-color: #4B4B4B;\\n    --feds-nav-height: 64px;\\n}\\n\\nheader.global-navigation.site-pivot {\\n    visibility: visible;\\n    display: block;\\n}\\n\\n.global-navigation nav ul {\\n    display: flex;\\n    width: 100%;\\n    max-width: var(--feds-maxWidth-nav);\\n    height: inherit;\\n    align-items: center;\\n}\\n\\n\\n.feds-link {\\n    font-size: 16px;\\n    font-weight: 800;\\n    color: #4B4B4B;\\n    font-family: var(--feds-heading-font);\\n    display: flex;\\n    align-items: center;\\n    border: 0;\\n    background-color: transparent;\\n    padding: 12px;\\n    color: var(--feds-link-color);\\n}\\n\\nheader.global-navigation.site-pivot nav {\\n    display: flex;\\n    align-items: center;\\n    width: 100%;\\n    max-width: var(--feds-maxWidth-nav);\\n    height: var(--feds-height-nav);\\n    padding-left: 10%;\\n    justify-content: flex-start;\\n}\\n\\n.global-navigation nav ul {\\n    display: flex;\\n    width: 100%;\\n    max-width: var(--feds-maxWidth-nav);\\n    height: inherit;\\n    align-items: center;\\n    padding-left: 0;\\n}\\n\\n.feds-link {\\n    font-size: 16px;\\n    font-weight: 800;\\n    color: #4B4B4B;\\n    font-family: var(--feds-heading-font);\\n    display: flex;\\n    align-items: center;\\n    border: 0;\\n    background-color: transparent;\\n    padding: 12px;\\n    color: var(--feds-link-color);\\n    cursor: pointer;\\n}\\n\\nheader.global-navigation.site-pivot:has(.feds-popup:popover-open) {\\n    background-color: #000;\\n}\\n\\nheader.global-navigation.site-pivot:has(.feds-popup:popover-open) .feds-link {\\n    color: #fff;\\n}\\n\\nheader.global-navigation.site-pivot ul {\\n    list-style: none;\\n    margin: 0;\\n}\";\n        const style = document.createElement('style');\n        style.textContent = css;\n        document.head.appendChild(style);\n      ", "import { component } from \"./Components/Component\";\nimport { productEntryCTA } from \"./Components/CTA/Render\";\nimport { renderGhostTabs} from \"./Components/MegaMenu/Render\";\nimport { IrrecoverableError, RecoverableError } from \"./Error/Error\";\nimport { GlobalNavigationData, parseNavigation } from \"./Parse/Parse\";\nimport { initClickListeners } from \"./PostRendering/ClickListeners\";\nimport { initKeyboardNav } from \"./PostRendering/Keyboard\";\nimport { loadUnav } from \"./PostRendering/Unav/Unav\";\nimport { getInitialHTML } from \"./PreRendering/FetchAssets\";\nimport { renderListItems, setMiloConfig, MiloConfig } from \"./Utils/Utils\";\nimport './styles/styles.css';\nimport { tabs } from \"./Components/Tab/Render\";\n\n// TODO implement Analytics\n\ntype GlobalNavigation = {\n  closeEverything: () => void;\n  reloadUnav: () => void;\n  getGnavTopPosition: () => number;\n  setGnavTopPosition: (_: number) => void;\n  errors: Set<RecoverableError>;\n};\n\nexport type Input = {\n  gnavSource: URL;\n  asideSource: URL | null;\n  gnavTop?: number;\n  isLocalNav: boolean;\n  mountpoint: HTMLElement;\n  unavEnabled: boolean;\n  miloConfig?: MiloConfig;\n\n  getStageDomainMap: (domainmap: unknown[], env: string) =>\n    { [key: string]: string }\n  // MEP: {\n  //   commands: unknown;\n  //   handleCommands: (_: unknown) => unknown;\n  // }\n};\n\nexport const main = async (\n  input: Input\n): Promise<GlobalNavigation | IrrecoverableError> => {\n  const { gnavSource, mountpoint, unavEnabled, miloConfig } = input;\n  console.log(miloConfig);\n  if (!(gnavSource instanceof URL)) {\n    throw new IrrecoverableError(\"gnavSource needs to be a URL object\");\n  }\n  const initial = await getInitialHTML(input);\n  if (initial instanceof IrrecoverableError)\n    throw initial;\n  const { mainNav, aside: _aside } = initial;\n  if (mainNav instanceof IrrecoverableError)\n    throw mainNav;\n\n  // Initialize MiloConfig with validation\n  try {\n    setMiloConfig(miloConfig);\n  } catch (error) {\n    throw new IrrecoverableError(`Failed to initialize MiloConfig: ${error}`);\n  }\n\n  const gnavData = parseNavigation(mainNav, unavEnabled);\n  if (gnavData instanceof IrrecoverableError)\n    throw gnavData;\n  \n  // TODO: Implement Aside\n  \n  await renderGnav(gnavData)(mountpoint);\n\n  return postRenderingTasks(input);\n};\n\n\nexport const renderGnav = (\n  data: GlobalNavigationData\n) => async (\nmountpoint: HTMLElement\n): Promise<HTMLElement> => {\n  const navHTML = renderGnavString(data)\n  mountpoint.innerHTML = navHTML;\n  mountpoint.classList.add('site-pivot');\n  const megaMenus = [\n    ...mountpoint.querySelectorAll('.mega-menu ~ .feds-popup > ul')\n  ]\n  megaMenus.forEach(mm => {\n    mm.innerHTML = renderGhostTabs(mm.textContent?.trim() ?? '');\n  });\n  const mmPromises = data.components\n    .filter(com => com.type === \"MegaMenu\")\n    .map(com => com.tabs);\n  const _errors_ = await Promise.all(mmPromises.map(async (mmPromise, idx) => {\n    const [parsedTabs, errors] = await mmPromise;\n    const brand = mountpoint.querySelector('.feds-brand-container')?.outerHTML ?? '';\n    const title = megaMenus[idx].parentElement?.previousElementSibling?.textContent ?? '';\n    const breadcrumbs = mountpoint.querySelector('.breadcrumbs')?.outerHTML ?? '';\n    const fedsPopupId = megaMenus[idx].querySelector('.feds-popup')?.id ?? '';\n    const isLocalNav = megaMenus.length === 1;\n    const renderedTabs = tabs(\n      brand,\n      title,\n      breadcrumbs,\n      fedsPopupId,\n      isLocalNav\n    )(parsedTabs);\n    megaMenus[idx].innerHTML = renderedTabs;\n    return errors;\n  }).flat());\n  return mountpoint;\n};\n\nexport const renderGnavString = ({\n  components,\n  productCTA,\n  unavEnabled,\n}: GlobalNavigationData\n): string => `\n<nav>\n  <ul>\n    ${renderListItems(components, component)}\n  </ul>\n  ${productCTA === null ? '' : productEntryCTA(productCTA)}\n  ${unavEnabled ? '<div class=\"feds-utilities\"></div>' : ''}\n</nav>\n`;\n\n\nexport const postRenderingTasks = async (\n  input: Input,\n): Promise<GlobalNavigation | IrrecoverableError> => {\n  const errors = new Set<RecoverableError>();\n  const unav = await loadUnav(input.mountpoint);\n  if (unav instanceof RecoverableError)\n    errors.add(unav);\n  else \n    unav.errors.forEach((error: RecoverableError) => errors.add(error));\n  initClickListeners(input.mountpoint);\n  initKeyboardNav(input.mountpoint);\n  \n  const reloadUnav\n    = unav instanceof RecoverableError\n    ? (): void => {}\n    : unav.reloadUnav;\n\n  return {\n    closeEverything,\n    reloadUnav,\n    errors,\n    setGnavTopPosition: (_): void => {},\n    getGnavTopPosition: (): number => 0,\n  };\n};\n\nconst closeEverything = (): void => {\n};\n\n"],
  "mappings": "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",
  "names": ["IrrecoverableError", "_IrrecoverableError", "message", "RecoverableError", "_RecoverableError", "severity", "isDesktop", "icons", "split", "predicate", "arr", "splitArrays", "currSubArray", "i", "takeWhile", "predicate", "arr", "firstItem", "remainingItems", "getNextSiblings", "element", "accumulator", "iterator", "alternative", "primaryFn", "fallbackFn", "input", "parseListAndAccumulateErrors", "elements", "parse", "accElems", "accErrors", "parsedElement", "parseErrors", "error", "IrrecoverableError", "setupMobileDesktopListeners", "mobileEventListeners", "desktopEventListeners", "gnav", "cleanup", "isDesktop", "fetchAndProcessPlainHTML", "source", "modifiedSource", "federateUrl", "response", "htmlText", "body", "federatedContentRoot", "getFederatedContentRoot", "cdnWhitelistedOrigins", "origin", "originNoStage", "SLD", "url", "pathname", "search", "hash", "e", "inlineNestedFragments", "processElement", "currentElem", "visitedUrls", "inlineLinks", "anchorElement", "federatedUrl", "fragmentUrl", "fragmentBody", "parentDiv", "renderListItems", "items", "renderFn", "item", "sanitize", "str", "isDarkMode", "loadLink", "href", "id", "as", "callback", "crossorigin", "rel", "fetchpriority", "link", "loadStyle", "loadStyles", "override", "loadScript", "type", "mode", "resolve", "reject", "script", "head", "onScript", "event", "getMetadata", "name", "doc", "attr", "meta", "isValidMiloConfig", "config", "cfg", "unav", "profile", "setMiloConfig", "getMiloConfig", "miloConfig", "isInitialized", "ERRORS", "IMG_REGEX", "extractImageSource", "element", "imgSrc", "text", "source", "href", "extractAltText", "alt", "parseBrand", "IrrecoverableError", "rawBlock", "blockLinks", "primaryLink", "link", "textContent", "isBrandImageOnly", "noLogo", "imageOnly", "renderImage", "renderLabel", "imageLinks", "imgSrcDark", "altText", "defaultImgSrc", "icons", "svgImgSrc", "svgDarkImgSrc", "img", "src", "label", "selectSource", "light", "dark", "hasDark", "isDarkMode", "imageData", "css", "style", "renderImage", "image", "imageOnly", "cls", "alt", "renderBrand", "href", "content", "ariaLabel", "brand", "brandData", "data", "aria", "ERRORS", "parseLink", "anchor", "IrrecoverableError", "text", "href", "parseCTA", "type", "element", "anchor", "getSelector", "text", "href", "es", "parseLink", "parsePrimaryCTA", "parseSecondaryCTA", "parseProductEntryCTA", "alternative", "primaryCTA", "text", "href", "secondaryCTA", "productEntryCTA", "cta", "link", "text", "href", "parseLinkGroup", "element", "alternative", "parseLinkGroupHeader", "parseLinkGroupLink", "parseLinkGroupBlue", "ERRORS", "errors", "IrrecoverableError", "titleElement", "title", "RecoverableError", "href", "subtitleElement", "subtitle", "iconHref", "iconAlt", "x", "classes", "a", "link", "es", "parseLink", "parseTab", "el", "parsedColumn", "errors", "parseColumn", "getTabCTA", "section", "item", "alternative", "parseSingleColumnSectionList", "parseSingleColumnSection", "parseMultiColumnSection", "parseMenuPromo", "parseColumnItems", "items", "parseListAndAccumulateErrors", "parseLinkGroup", "parsePrimaryCTA", "parseSecondaryCTA", "parseLink", "extractColumnItems", "elements", "element", "IrrecoverableError", "h5", "title", "columnItems", "getNextSiblings", "rawLinks", "es", "h5s", "parseSection", "container", "listItems", "takeWhile", "x", "sections", "ERRORS", "rawColumns", "split", "columns", "promo", "content", "parseMegaMenu", "element", "errors", "IrrecoverableError", "ERRORS", "title", "RecoverableError", "tabs", "fragment", "fragmentURL", "initialFragment", "fetchAndProcessPlainHTML", "megaMenuFragment", "inlineNestedFragments", "unparsedTabs", "parseListAndAccumulateErrors", "parseTab", "e", "unparsedCrossCloud", "crossCloudMenu", "ccmErrors", "parseLink", "isSection", "css", "style", "renderGhostTabs", "title", "tab", "tabs", "name", "description", "i", "_", "megaMenu", "isSection", "sanitize", "parseSmallMenu", "element", "errors", "IrrecoverableError", "ERRORS", "h2", "title", "RecoverableError", "columnsContainer", "container", "getNextSiblings", "s", "columns", "es", "alternative", "parseSingleColumnSectionList", "el", "parseListAndAccumulateErrors", "parseNoTitleColumn", "promo", "pes", "parseMenuPromo", "links", "parseLink", "css", "style", "linkGroup", "lg", "linkGroupHeader", "linkGroupLink", "linkGroupBlue", "title", "classes", "cls", "iconHref", "iconAlt", "href", "subtitle", "icon", "link", "tabs", "brand", "title", "breadcrumbs", "fedsPopupId", "isLocalNav", "ts", "t", "i", "item", "renderListItems", "links", "l", "columnItem", "menuPromo", "content", "linkGroup", "link", "primaryCTA", "secondaryCTA", "smallMenu", "title", "columns", "promo", "sanitize", "smallMenuList", "menuPromo", "c", "column", "renderListItems", "l", "link", "section", "columnItem", "ERRORS", "parseText", "element", "RecoverableError", "content", "text", "content", "parseComponent", "element", "IrrecoverableError", "ERRORS", "parseBrand", "largeMenu", "parseMegaMenu", "parseSmallMenu", "parsePrimaryCTA", "parseSecondaryCTA", "parseText", "parseLink", "component", "c", "text", "link", "secondaryCTA", "primaryCTA", "brand", "smallMenu", "megaMenu", "parseNavigation", "mainNav", "unavEnabled", "breadcrumbs", "breadcrumbErrors", "parseListAndAccumulateErrors", "parseLink", "components", "componentErrors", "parseComponent", "productEntryElement", "productCTA", "productCtaErrors", "parseProductEntryCTA", "localnav", "component", "errors", "mobileClickListeners", "gnav", "tabButtons", "tabPanels", "tabButtonClickCallbacks", "button", "i", "tabButton", "tabPanel", "initClickListeners", "mobileClickListeners", "initDesktopKeyboardNav", "gnav", "initMobileKeyboardNav", "initKeyboardNav", "setupMobileDesktopListeners", "SIGNED_OUT_ICONS", "LANGMAP", "setUserProfile", "getUserProfile", "profileData", "profileResolve", "profileTimeout", "profilePromise", "resolve", "data", "getUnavWidthCSS", "unavComponents", "signedOut", "components", "x", "n", "l", "c", "getUniversalNavLocale", "locale", "prefix", "lang", "country", "customLang", "key", "OS_MAP", "getDevice", "agent", "os", "osName", "getVisitorGuid", "windowWithAlloy", "getSignInContext", "getMiloConfig", "getSignInCtaStyle", "config", "getMetadata", "getMessageEventListener", "configListener", "event", "name", "payload", "executeDefaultAction", "data", "setUserProfile", "profile", "getHelpChildren", "unav", "getUnavComponents", "setProfileSignUpRequired", "children", "value", "loadUnav", "nav", "_config", "utilitiesContainer", "RecoverableError", "errors", "meta", "rawValue", "trimmedValue", "signedOut", "unavComponents", "option", "component", "getUnavComponents", "width", "getUnavWidthCSS", "config", "getMiloConfig", "locale", "getUniversalNavLocale", "environment", "visitorGuid", "getVisitorGuid", "unavVersion", "loadScript", "loadStyles", "getChildren", "unavComponentsConfig", "unavComponent", "getConfiguration", "getDevice", "isDesktop", "reloadUnav", "_", "error", "message", "getInitialHTML", "gnavSource", "asideSource", "mainNav", "fetchAndProcessPlainHTML", "IrrecoverableError", "aside", "css", "style", "main", "input", "gnavSource", "mountpoint", "unavEnabled", "miloConfig", "IrrecoverableError", "initial", "getInitialHTML", "mainNav", "_aside", "setMiloConfig", "error", "gnavData", "parseNavigation", "renderGnav", "postRenderingTasks", "data", "navHTML", "renderGnavString", "megaMenus", "mm", "renderGhostTabs", "mmPromises", "com", "_errors_", "mmPromise", "idx", "parsedTabs", "errors", "brand", "title", "breadcrumbs", "fedsPopupId", "isLocalNav", "renderedTabs", "tabs", "components", "productCTA", "renderListItems", "component", "productEntryCTA", "unav", "loadUnav", "RecoverableError", "initClickListeners", "initKeyboardNav", "reloadUnav", "closeEverything", "_"]
}
